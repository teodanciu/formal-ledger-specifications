<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Tactic.Assumption</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>
<a id="36" class="Comment">--------------------------------------------------------------------------------</a>
<a id="117" class="Comment">-- assumption: try to solve the goal with one of the available assumptions</a>
<a id="192" class="Comment">--------------------------------------------------------------------------------</a>

<a id="274" class="Keyword">module</a> <a id="281" href="Tactic.Assumption.html" class="Module">Tactic.Assumption</a> <a id="299" class="Keyword">where</a>

<a id="306" class="Keyword">open</a> <a id="311" class="Keyword">import</a> <a id="318" href="MetaPrelude.html" class="Module">MetaPrelude</a>
<a id="330" class="Keyword">open</a> <a id="335" class="Keyword">import</a> <a id="342" href="Meta.html" class="Module">Meta</a>

<a id="348" class="Keyword">open</a> <a id="353" class="Keyword">import</a> <a id="360" href="Interface.Monad.Instance.html" class="Module">Interface.Monad.Instance</a>
<a id="385" class="Keyword">open</a> <a id="390" class="Keyword">import</a> <a id="397" href="Interface.MonadError.Instance.html" class="Module">Interface.MonadError.Instance</a>
<a id="427" class="Keyword">open</a> <a id="432" class="Keyword">import</a> <a id="439" href="Interface.MonadReader.Instance.html" class="Module">Interface.MonadReader.Instance</a>
<a id="470" class="Keyword">open</a> <a id="475" class="Keyword">import</a> <a id="482" href="Interface.MonadTC.Instance.html" class="Module">Interface.MonadTC.Instance</a>

<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Tactic.Helpers.html" class="Module">Tactic.Helpers</a>

<a id="538" class="Keyword">open</a> <a id="543" class="Keyword">import</a> <a id="550" href="Generics.html" class="Module">Generics</a>

<a id="solve"></a><a id="560" href="Tactic.Assumption.html#560" class="Function">solve</a> <a id="566" class="Symbol">:</a> <a id="568" class="Symbol">⦃</a> <a id="570" href="Tactic.Assumption.html#570" class="Bound">_</a> <a id="572" class="Symbol">:</a> <a id="574" href="Reflection.Debug.html#2344" class="Record">DebugOptions</a> <a id="587" class="Symbol">⦄</a> <a id="589" class="Symbol">→</a> <a id="591" href="Agda.Builtin.Reflection.html#4670" class="Datatype">Term</a> <a id="596" class="Symbol">→</a> <a id="598" href="Generics.Core.html#2462" class="Function">Tactic</a>
<a id="605" href="Tactic.Assumption.html#560" class="Function">solve</a> <a id="611" href="Tactic.Assumption.html#611" class="Bound">t</a> <a id="613" class="Symbol">=</a> <a id="615" href="Tactic.Helpers.html#5927" class="Function">initTac</a> <a id="623" href="Function.Base.html#1994" class="Function Operator">$</a> <a id="625" href="Interface.MonadTC.html#2305" class="Field">runSpeculative</a> <a id="640" href="Function.Base.html#1994" class="Function Operator">$</a> <a id="642" class="Keyword">do</a>
  <a id="647" href="Data.Sum.Base.html#666" class="InductiveConstructor">inj₁</a> <a id="652" href="Tactic.Assumption.html#652" class="Bound">goal</a> <a id="657" href="Interface.Monad.html#311" class="Field Operator">←</a> <a id="659" href="Interface.MonadReader.html#393" class="Function">reader</a> <a id="666" href="Interface.MonadTC.html#888" class="Field">TCEnv.goal</a>
    <a id="681" class="Keyword">where</a> <a id="687" class="CatchallClause Symbol">_</a> <a id="689" class="Symbol">→</a> <a id="691" href="Interface.MonadTC.html#8551" class="Function">error1</a> <a id="698" class="String">&quot;solve: Goal is not a term!&quot;</a>
  <a id="729" href="Tactic.Assumption.html#729" class="Bound">metas</a> <a id="735" href="Interface.Monad.html#311" class="Field Operator">←</a> <a id="737" href="Generics.Utils.html#1251" class="Function">findMetas</a> <a id="747" href="Interface.Monad.html#631" class="Function Operator">&lt;$&gt;</a> <a id="751" href="Interface.MonadTC.html#1658" class="Field">checkType</a> <a id="761" href="Tactic.Assumption.html#611" class="Bound">t</a> <a id="763" href="Tactic.Assumption.html#652" class="Bound">goal</a>
  <a id="770" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="773" href="Data.List.Base.html#4717" class="Function">null</a> <a id="778" href="Tactic.Assumption.html#729" class="Bound">metas</a>
    <a id="788" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="793" class="Symbol">(</a><a id="794" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,</a> <a id="797" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="801" class="Symbol">)</a>  <a id="804" href="Interface.Monad.html#631" class="Function Operator">&lt;$&gt;</a> <a id="808" href="Interface.MonadTC.html#1520" class="Field">unify</a> <a id="814" href="Tactic.Assumption.html#652" class="Bound">goal</a> <a id="819" href="Tactic.Assumption.html#611" class="Bound">t</a>
    <a id="825" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="830" class="Symbol">(</a><a id="831" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,</a> <a id="834" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="839" class="Symbol">)</a> <a id="841" href="Interface.Monad.html#631" class="Function Operator">&lt;$&gt;</a> <a id="845" href="Interface.MonadTC.html#8551" class="Function">error1</a> <a id="852" class="String">&quot;Unsolved metavariables remaining!&quot;</a>

<a id="assumption&#39;"></a><a id="889" href="Tactic.Assumption.html#889" class="Function">assumption&#39;</a> <a id="901" class="Symbol">:</a> <a id="903" href="Tactic.Helpers.html#5653" class="Function">ITactic</a>
<a id="911" href="Tactic.Assumption.html#889" class="Function">assumption&#39;</a> <a id="923" class="Symbol">=</a> <a id="925" href="Tactic.Helpers.html#2528" class="Function">inDebugPath</a> <a id="937" class="String">&quot;assumption&quot;</a> <a id="950" class="Keyword">do</a>
  <a id="955" href="Tactic.Assumption.html#955" class="Bound">c</a> <a id="957" href="Interface.Monad.html#311" class="Field Operator">←</a> <a id="959" href="Interface.MonadTC.html#7796" class="Function">getContext</a>
  <a id="972" href="Data.List.Base.html#4412" class="Function">foldl</a> <a id="978" class="Symbol">(λ</a> <a id="981" href="Tactic.Assumption.html#981" class="Bound">x</a> <a id="983" href="Tactic.Assumption.html#983" class="Bound">k</a> <a id="985" class="Symbol">→</a> <a id="987" class="Keyword">do</a>
    <a id="994" href="Interface.MonadError.html#389" class="Field">catch</a> <a id="1000" class="Symbol">(</a><a id="1001" href="Interface.MonadTC.html#10332" class="Function">unifyWithGoal</a> <a id="1015" class="Symbol">(</a><a id="1016" href="Generics.Core.html#376" class="InductiveConstructor">♯</a> <a id="1018" href="Tactic.Assumption.html#983" class="Bound">k</a><a id="1019" class="Symbol">)</a> <a id="1021" href="Interface.Monad.html#345" class="Function Operator">&gt;&gt;</a> <a id="1024" href="Interface.MonadTC.html#5576" class="Function">debugLog</a> <a id="1033" class="Symbol">(</a><a id="1034" class="String">&quot;Success with: &quot;</a> <a id="1051" href="Reflection.Debug.html#996" class="Function Operator">∷ᵈ</a> <a id="1054" href="Generics.Core.html#376" class="InductiveConstructor">♯</a> <a id="1056" href="Tactic.Assumption.html#983" class="Bound">k</a> <a id="1058" href="Reflection.Debug.html#996" class="Function Operator">∷ᵈ</a> <a id="1061" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="1063" class="Symbol">))</a> <a id="1066" class="Symbol">(λ</a> <a id="1069" href="Tactic.Assumption.html#1069" class="Bound">_</a> <a id="1071" class="Symbol">→</a> <a id="1073" href="Tactic.Assumption.html#981" class="Bound">x</a><a id="1074" class="Symbol">))</a>
    <a id="1081" class="Symbol">(</a><a id="1082" href="Interface.MonadTC.html#8698" class="Function">logAndError1</a> <a id="1095" class="String">&quot;No valid assumption!&quot;</a><a id="1117" class="Symbol">)</a> <a id="1119" class="Symbol">(</a><a id="1120" href="Data.List.Base.html#6467" class="Function">downFrom</a> <a id="1129" href="Function.Base.html#1994" class="Function Operator">$</a> <a id="1131" href="Data.List.Base.html#5058" class="Function">length</a> <a id="1138" href="Tactic.Assumption.html#955" class="Bound">c</a><a id="1139" class="Symbol">)</a>

<a id="1142" class="Keyword">module</a> <a id="1149" href="Tactic.Assumption.html#1149" class="Module">_</a> <a id="1151" class="Symbol">⦃</a> <a id="1153" href="Tactic.Assumption.html#1153" class="Bound">_</a> <a id="1155" class="Symbol">:</a> <a id="1157" href="Reflection.Debug.html#2344" class="Record">DebugOptions</a> <a id="1170" class="Symbol">⦄</a> <a id="1172" class="Keyword">where</a>
  <a id="1180" class="Keyword">macro</a>
    <a id="1190" href="Tactic.Assumption.html#1190" class="Function">assumption</a> <a id="1201" class="Symbol">=</a> <a id="1203" href="Tactic.Helpers.html#5927" class="Function">initTac</a> <a id="1211" href="Tactic.Assumption.html#889" class="Function">assumption&#39;</a>
    <a id="1227" href="Tactic.Assumption.html#1227" class="Function">assumptionOpts</a> <a id="1242" class="Symbol">=</a> <a id="1244" href="Tactic.Helpers.html#5804" class="Function">initTacOpts</a> <a id="1256" href="Tactic.Assumption.html#889" class="Function">assumption&#39;</a>

<a id="1269" class="Keyword">private</a>
  <a id="1279" class="Keyword">open</a> <a id="1284" class="Keyword">import</a> <a id="1291" href="Tactic.Defaults.html" class="Module">Tactic.Defaults</a>
  <a id="1309" class="Keyword">module</a> <a id="Test"></a><a id="1316" href="Tactic.Assumption.html#1316" class="Module">Test</a> <a id="1321" class="Keyword">where</a>
    <a id="Test.test₁"></a><a id="1331" href="Tactic.Assumption.html#1331" class="Function">test₁</a> <a id="1337" class="Symbol">:</a> <a id="1339" class="Symbol">{</a><a id="1340" href="Tactic.Assumption.html#1340" class="Bound">A</a> <a id="1342" href="Tactic.Assumption.html#1342" class="Bound">B</a> <a id="1344" class="Symbol">:</a> <a id="1346" href="Agda.Primitive.html#320" class="Primitive">Set</a><a id="1349" class="Symbol">}</a> <a id="1351" class="Symbol">→</a> <a id="1353" href="Tactic.Assumption.html#1340" class="Bound">A</a> <a id="1355" class="Symbol">→</a> <a id="1357" href="Tactic.Assumption.html#1342" class="Bound">B</a> <a id="1359" class="Symbol">→</a> <a id="1361" href="Tactic.Assumption.html#1340" class="Bound">A</a>
    <a id="1367" href="Tactic.Assumption.html#1331" class="Function">test₁</a> <a id="1373" href="Tactic.Assumption.html#1373" class="Bound">a</a> <a id="1375" href="Tactic.Assumption.html#1375" class="Bound">b</a> <a id="1377" class="Symbol">=</a> <a id="1379" href="Tactic.Assumption.html#1190" class="Macro">assumption</a>
    
    <a id="Test.test₂"></a><a id="1399" href="Tactic.Assumption.html#1399" class="Function">test₂</a> <a id="1405" class="Symbol">:</a> <a id="1407" class="Symbol">{</a><a id="1408" href="Tactic.Assumption.html#1408" class="Bound">A</a> <a id="1410" href="Tactic.Assumption.html#1410" class="Bound">B</a> <a id="1412" class="Symbol">:</a> <a id="1414" href="Agda.Primitive.html#320" class="Primitive">Set</a><a id="1417" class="Symbol">}</a> <a id="1419" class="Symbol">→</a> <a id="1421" href="Tactic.Assumption.html#1408" class="Bound">A</a> <a id="1423" class="Symbol">→</a> <a id="1425" href="Tactic.Assumption.html#1410" class="Bound">B</a> <a id="1427" class="Symbol">→</a> <a id="1429" href="Tactic.Assumption.html#1410" class="Bound">B</a>
    <a id="1435" href="Tactic.Assumption.html#1399" class="Function">test₂</a> <a id="1441" href="Tactic.Assumption.html#1441" class="Bound">a</a> <a id="1443" href="Tactic.Assumption.html#1443" class="Bound">b</a> <a id="1445" class="Symbol">=</a> <a id="1447" href="Tactic.Assumption.html#1190" class="Macro">assumption</a>
</pre></body></html>