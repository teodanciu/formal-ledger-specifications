<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.TokenAlgebra.ValueSet</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Background">\subsection{Value Set}
\label{sec:tokenalgebra-valueset}

</a><a id="59" class="Markup">\begin{code}[hide]</a>
<a id="78" class="Symbol">{-#</a> <a id="82" class="Keyword">OPTIONS</a> <a id="90" class="Pragma">--safe</a> <a id="97" class="Pragma">--no-import-sorts</a> <a id="115" class="Symbol">#-}</a>

<a id="120" class="Keyword">open</a> <a id="125" class="Keyword">import</a> <a id="132" href="Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="147" class="Keyword">using</a> <a id="153" class="Symbol">()</a> <a id="156" class="Keyword">renaming</a> <a id="165" class="Symbol">(</a><a id="166" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="170" class="Symbol">to</a> <a id="173" class="Primitive">Type</a><a id="177" class="Symbol">)</a>

<a id="180" class="Keyword">module</a> <a id="187" href="Ledger.TokenAlgebra.ValueSet.html" class="Module">Ledger.TokenAlgebra.ValueSet</a> <a id="216" class="Symbol">(</a><a id="217" href="Ledger.TokenAlgebra.ValueSet.html#217" class="Bound">PolicyId</a> <a id="226" href="Ledger.TokenAlgebra.ValueSet.html#226" class="Bound">AssetName</a> <a id="236" class="Symbol">:</a> <a id="238" href="Ledger.TokenAlgebra.ValueSet.html#173" class="Primitive">Type</a><a id="242" class="Symbol">)</a> <a id="244" class="Keyword">where</a>

<a id="251" class="Keyword">open</a> <a id="256" class="Keyword">import</a> <a id="263" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>                         <a id="302" class="Keyword">hiding</a> <a id="309" class="Symbol">(</a><a id="310" href="Data.List.Base.html#6300" class="Function">lookup</a> <a id="317" class="Symbol">;</a> <a id="319" href="Axiom.Set.Map.html#10089" class="Function">update</a> <a id="326" class="Symbol">;</a> <a id="328" href="Relation.Binary.PropositionalEquality.Algebra.html#656" class="Function">isMagma</a> <a id="336" class="Symbol">;</a> <a id="338" href="Relation.Binary.PropositionalEquality.Properties.html#5112" class="Function">isEquivalence</a><a id="351" class="Symbol">)</a> <a id="353" class="Keyword">renaming</a> <a id="362" class="Symbol">(</a><a id="363" href="Axiom.Set.TotalMap.html#767" class="Record">TotalMap</a> <a id="372" class="Symbol">to</a> <a id="375" class="Record">_⇒_</a><a id="378" class="Symbol">)</a>
<a id="380" class="Keyword">open</a> <a id="385" class="Keyword">import</a> <a id="392" href="Ledger.TokenAlgebra.html" class="Module">Ledger.TokenAlgebra</a> <a id="412" href="Ledger.TokenAlgebra.ValueSet.html#217" class="Bound">PolicyId</a>           <a id="431" class="Keyword">using</a> <a id="437" class="Symbol">(</a><a id="438" href="Ledger.TokenAlgebra.html#499" class="Record">TokenAlgebra</a><a id="450" class="Symbol">)</a>

<a id="453" class="Keyword">open</a> <a id="458" class="Keyword">import</a> <a id="465" href="Algebra.html" class="Module">Algebra</a>                                <a id="504" class="Keyword">using</a> <a id="510" class="Symbol">(</a><a id="511" href="Algebra.Bundles.html#6578" class="Record">CommutativeMonoid</a> <a id="529" class="Symbol">;</a> <a id="531" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="535" class="Symbol">;</a> <a id="537" href="Algebra.Structures.html#2789" class="Record">IsSemigroup</a> <a id="549" class="Symbol">;</a> <a id="551" href="Algebra.Structures.html#3866" class="Record">IsMonoid</a> <a id="560" class="Symbol">;</a> <a id="562" href="Algebra.Structures.html#1117" class="Record">IsMagma</a> <a id="570" class="Symbol">;</a> <a id="572" href="Algebra.Structures.html#4276" class="Record">IsCommutativeMonoid</a><a id="591" class="Symbol">)</a>
<a id="593" class="Keyword">open</a> <a id="598" class="Keyword">import</a> <a id="605" href="Algebra.Morphism.html" class="Module">Algebra.Morphism</a>                       <a id="644" class="Keyword">using</a> <a id="650" class="Symbol">(</a><a id="651" href="Algebra.Morphism.Structures.html#2756" class="Record">IsMonoidHomomorphism</a> <a id="672" class="Symbol">;</a> <a id="674" href="Algebra.Morphism.Structures.html#1103" class="Record">IsMagmaHomomorphism</a><a id="693" class="Symbol">)</a>
<a id="695" class="Keyword">open</a> <a id="700" class="Keyword">import</a> <a id="707" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>                    <a id="746" class="Keyword">using</a> <a id="752" class="Symbol">(</a><a id="753" href="Data.Nat.Properties.html#14777" class="Function">+-comm</a> <a id="760" class="Symbol">;</a> <a id="762" href="Data.Nat.Properties.html#14444" class="Function">+-assoc</a> <a id="770" class="Symbol">;</a> <a id="772" href="Data.Nat.Properties.html#14600" class="Function">+-identityʳ</a> <a id="784" class="Symbol">;</a> <a id="786" href="Data.Nat.Properties.html#16466" class="Function">+-0-commutativeMonoid</a><a id="807" class="Symbol">)</a>
<a id="809" class="Keyword">open</a> <a id="814" class="Keyword">import</a> <a id="821" href="Function.Related.TypeIsomorphisms.html" class="Module">Function.Related.TypeIsomorphisms</a>      <a id="860" class="Keyword">using</a> <a id="866" class="Symbol">(</a><a id="867" href="Function.Related.TypeIsomorphisms.html#12059" class="Function">Σ-≡,≡→≡</a><a id="874" class="Symbol">)</a>
<a id="876" class="Keyword">open</a> <a id="881" class="Keyword">import</a> <a id="888" href="Relation.Binary.html" class="Module">Relation.Binary</a>                        <a id="927" class="Keyword">using</a> <a id="933" class="Symbol">(</a><a id="934" href="Relation.Binary.Structures.html#1536" class="Record">IsEquivalence</a><a id="947" class="Symbol">)</a>
<a id="949" class="Keyword">open</a> <a id="954" class="Keyword">import</a> <a id="961" href="Relation.Binary.Morphism.html" class="Module">Relation.Binary.Morphism</a>               <a id="1000" class="Keyword">using</a> <a id="1006" class="Symbol">(</a><a id="1007" href="Relation.Binary.Morphism.Structures.html#706" class="Record">IsRelHomomorphism</a><a id="1024" class="Symbol">)</a>
<a id="1026" class="Keyword">open</a> <a id="1031" class="Keyword">import</a> <a id="1038" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>  <a id="1077" class="Keyword">using</a> <a id="1083" class="Symbol">(</a><a id="1084" class="Keyword">module</a> <a id="1091" href="Relation.Binary.PropositionalEquality.Core.html#2722" class="Module">≡-Reasoning</a><a id="1102" class="Symbol">)</a>

<a id="1105" class="Keyword">import</a> <a id="1112" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1150" class="Symbol">as</a> <a id="1153" class="Module">≡</a>
<a id="1155" class="Keyword">import</a> <a id="1162" href="Relation.Binary.Core.html" class="Module">Relation.Binary.Core</a>  <a id="1184" class="Symbol">as</a> <a id="1187" class="Module">stdlib</a>
<a id="1194" class="Markup">\end{code}</a><a id="1204" class="Background">

\subsubsection{Derived types}

(See Fig 3 of the
\href{https://github.com/input-output-hk/cardano-ledger/releases/latest/download/mary-ledger.pdf}%
{Mary ledger specification}.)

\begin{itemize}
\item \AgdaBound{AssetName} is a byte string used to distinguish different assets with the same \AgdaBound{PolicyId}.
\item \AgdaBound{AssetId} is a product type consisting of a \AgdaBound{PolicyId} and an \AgdaBound{AssetName}.
\item \AgdaBound{AdaId} is the Id for the asset Ada.
\item \AgdaBound{Quantity} is the type of amounts of assets.
\end{itemize}

In the formal ledger specification \AgdaBound{AssetId} is sometimes viewed as a direct sum type,
the inhabitants of which belong to either \AgdaBound{AdaIdType} or the product
\AgdaBound{PolicyId}~\AgdaBound{×}~\AgdaBound{AssetName}; if we were adhering to that point of view,
then we would have defined
\AgdaBound{AssetId}
  = \AgdaBound{AdaIdType}~\AgdaBound{⊎}~(\AgdaBound{PolicyId}~\AgdaBound{×}~\AgdaBound{AssetName}).

Finally, we define a record type with a single inhabitant with which we may wish to
represent the type of Ada (rather than viewing Ada as just another asset).

</a><a id="2344" class="Markup">\begin{code}</a>
<a id="2357" class="Keyword">record</a> <a id="AdaIdType"></a><a id="2364" href="Ledger.TokenAlgebra.ValueSet.html#2364" class="Record">AdaIdType</a> <a id="2374" class="Symbol">:</a> <a id="2376" href="Ledger.TokenAlgebra.ValueSet.html#173" class="Primitive">Type</a> <a id="2381" class="Keyword">where</a>
  <a id="2389" class="Keyword">instance</a> <a id="2398" class="Keyword">constructor</a> <a id="AdaId"></a><a id="2410" href="Ledger.TokenAlgebra.ValueSet.html#2410" class="InductiveConstructor">AdaId</a>
<a id="2416" class="Markup">\end{code}</a><a id="2426" class="Background">


\subsection{Definition of the value monoid}

An inhabitant of `Value` is a map denoting a finite collection of quantities of assets.

</a><a id="2563" class="Markup">\begin{code}</a>
<a id="2576" class="Keyword">open</a> <a id="2581" href="Algebra.Bundles.html#6578" class="Module">CommutativeMonoid</a> <a id="2599" class="Keyword">renaming</a> <a id="2608" class="Symbol">(</a><a id="2609" href="Algebra.Bundles.html#6740" class="Field Operator">_∙_</a> <a id="2613" class="Symbol">to</a> <a id="2616" class="Field Operator">_⋆_</a><a id="2619" class="Symbol">)</a> <a id="2621" class="Keyword">hiding</a> <a id="2628" class="Symbol">(</a><a id="2629" href="Relation.Binary.Structures.html#1582" class="Function">refl</a> <a id="2634" class="Symbol">;</a> <a id="2636" href="Relation.Binary.Structures.html#1608" class="Function">sym</a> <a id="2640" class="Symbol">;</a> <a id="2642" href="Relation.Binary.Structures.html#1634" class="Function">trans</a><a id="2647" class="Symbol">)</a>

<a id="AssetId"></a><a id="2650" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="2658" class="Symbol">:</a> <a id="2660" href="Ledger.TokenAlgebra.ValueSet.html#173" class="Primitive">Type</a>
<a id="2665" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="2673" class="Symbol">=</a> <a id="2675" href="Ledger.TokenAlgebra.ValueSet.html#217" class="Bound">PolicyId</a> <a id="2684" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="2686" href="Ledger.TokenAlgebra.ValueSet.html#226" class="Bound">AssetName</a>

<a id="2697" class="Keyword">module</a> <a id="2704" href="Ledger.TokenAlgebra.ValueSet.html#2704" class="Module">_</a>
  <a id="2708" class="Symbol">{</a><a id="2709" href="Ledger.TokenAlgebra.ValueSet.html#2709" class="Bound">X</a> <a id="2711" class="Symbol">:</a> <a id="2713" href="Ledger.Prelude.html#1514" class="Function Operator">ℙ</a> <a id="2715" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a><a id="2722" class="Symbol">}</a>
  <a id="2726" class="Symbol">{</a><a id="2727" href="Ledger.TokenAlgebra.ValueSet.html#2727" class="Bound">⋁A</a> <a id="2730" class="Symbol">:</a> <a id="2732" href="Axiom.Set.html#4179" class="Function">isMaximal</a> <a id="2742" href="Ledger.TokenAlgebra.ValueSet.html#2709" class="Bound">X</a><a id="2743" class="Symbol">}</a>
  <a id="2747" class="Symbol">⦃</a> <a id="2749" href="Ledger.TokenAlgebra.ValueSet.html#2749" class="Bound">dec</a> <a id="2753" class="Symbol">:</a> <a id="2755" href="Interface.DecEq.html#185" class="Record">DecEq</a> <a id="2761" class="Symbol">(</a><a id="2762" href="Ledger.TokenAlgebra.ValueSet.html#217" class="Bound">PolicyId</a> <a id="2771" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="2773" href="Ledger.TokenAlgebra.ValueSet.html#226" class="Bound">AssetName</a><a id="2782" class="Symbol">)</a> <a id="2784" class="Symbol">⦄</a>
  <a id="2788" class="Keyword">where</a>

  <a id="2797" class="Keyword">open</a> <a id="2802" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Module">_⇒_</a>
  <a id="2808" class="Keyword">open</a> <a id="2813" href="Relation.Binary.PropositionalEquality.Core.html#2722" class="Module">≡-Reasoning</a>
  <a id="2827" class="Keyword">open</a> <a id="2832" href="Axiom.Set.TotalMap.html#2693" class="Module">FunTot</a> <a id="2839" href="Ledger.TokenAlgebra.ValueSet.html#2709" class="Bound">X</a> <a id="2841" href="Ledger.TokenAlgebra.ValueSet.html#2727" class="Bound">⋁A</a>

  <a id="2847" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a> <a id="2856" class="Symbol">:</a> <a id="2858" href="Ledger.TokenAlgebra.ValueSet.html#173" class="Primitive">Type</a>
  <a id="2865" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a> <a id="2874" class="Symbol">=</a> <a id="2876" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>

  <a id="2881" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">_⊕_</a> <a id="2885" class="Symbol">:</a> <a id="2887" href="Algebra.Core.html#518" class="Function">Op₂</a> <a id="2891" class="Symbol">(</a><a id="2892" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="2900" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="2902" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a><a id="2910" class="Symbol">)</a>
  <a id="2914" href="Ledger.TokenAlgebra.ValueSet.html#2914" class="Bound">u</a> <a id="2916" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="2918" href="Ledger.TokenAlgebra.ValueSet.html#2918" class="Bound">v</a> <a id="2920" class="Symbol">=</a> <a id="2922" href="Axiom.Set.TotalMap.html#2881" class="Function">Fun⇒TotalMap</a> <a id="2935" class="Symbol">λ</a> <a id="2937" href="Ledger.TokenAlgebra.ValueSet.html#2937" class="Bound">aa</a> <a id="2940" class="Symbol">→</a> <a id="2942" class="Symbol">(</a><a id="2943" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="2950" href="Ledger.TokenAlgebra.ValueSet.html#2914" class="Bound">u</a><a id="2951" class="Symbol">)</a> <a id="2953" href="Ledger.TokenAlgebra.ValueSet.html#2937" class="Bound">aa</a> <a id="2956" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="2958" class="Symbol">(</a><a id="2959" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="2966" href="Ledger.TokenAlgebra.ValueSet.html#2918" class="Bound">v</a><a id="2967" class="Symbol">)</a> <a id="2969" href="Ledger.TokenAlgebra.ValueSet.html#2937" class="Bound">aa</a>

  <a id="2975" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="2983" class="Symbol">:</a>  <a id="2986" class="Symbol">(</a><a id="2987" href="Ledger.TokenAlgebra.ValueSet.html#2987" class="Bound">u</a> <a id="2989" href="Ledger.TokenAlgebra.ValueSet.html#2989" class="Bound">v</a> <a id="2991" class="Symbol">:</a> <a id="2993" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="3001" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="3003" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a><a id="3011" class="Symbol">){</a><a id="3013" href="Ledger.TokenAlgebra.ValueSet.html#3013" class="Bound">aa</a> <a id="3016" class="Symbol">:</a> <a id="3018" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a><a id="3025" class="Symbol">}</a>
             <a id="3040" class="Symbol">→</a> <a id="3042" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3049" class="Symbol">(</a><a id="3050" href="Ledger.TokenAlgebra.ValueSet.html#2987" class="Bound">u</a> <a id="3052" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="3054" href="Ledger.TokenAlgebra.ValueSet.html#2989" class="Bound">v</a><a id="3055" class="Symbol">)</a> <a id="3057" href="Ledger.TokenAlgebra.ValueSet.html#3013" class="Bound">aa</a> <a id="3060" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3062" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3069" href="Ledger.TokenAlgebra.ValueSet.html#2987" class="Bound">u</a> <a id="3071" href="Ledger.TokenAlgebra.ValueSet.html#3013" class="Bound">aa</a> <a id="3074" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="3076" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3083" href="Ledger.TokenAlgebra.ValueSet.html#2989" class="Bound">v</a> <a id="3085" href="Ledger.TokenAlgebra.ValueSet.html#3013" class="Bound">aa</a>
  <a id="3090" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="3098" class="Symbol">_</a> <a id="3100" class="Symbol">_</a> <a id="3102" class="Symbol">=</a> <a id="3104" href="Axiom.Set.TotalMap.html#3230" class="Function">lookup∘Fun⇒TotalMap-id</a>

  <a id="3130" href="Ledger.TokenAlgebra.ValueSet.html#3130" class="Function">zeroFun</a> <a id="3138" class="Symbol">:</a> <a id="3140" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="3148" class="Symbol">→</a> <a id="3150" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a>
  <a id="3161" href="Ledger.TokenAlgebra.ValueSet.html#3130" class="Function">zeroFun</a> <a id="3169" class="Symbol">=</a> <a id="3171" class="Symbol">λ</a> <a id="3173" href="Ledger.TokenAlgebra.ValueSet.html#3173" class="Bound">_</a> <a id="3175" class="Symbol">→</a> <a id="3177" class="Number">0</a>

  <a id="3182" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a> <a id="3184" class="Symbol">:</a> <a id="3186" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="3194" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="3196" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a>
  <a id="3207" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a> <a id="3209" class="Symbol">=</a> <a id="3211" href="Axiom.Set.TotalMap.html#2881" class="Function">Fun⇒TotalMap</a> <a id="3224" href="Ledger.TokenAlgebra.ValueSet.html#3130" class="Function">zeroFun</a>

  <a id="3235" href="Ledger.TokenAlgebra.ValueSet.html#3235" class="Function">lookupι≡0</a> <a id="3245" class="Symbol">:</a>  <a id="3248" class="Symbol">∀{</a><a id="3250" href="Ledger.TokenAlgebra.ValueSet.html#3250" class="Bound">a</a><a id="3251" class="Symbol">}</a> <a id="3253" class="Symbol">→</a> <a id="3255" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3262" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a> <a id="3264" href="Ledger.TokenAlgebra.ValueSet.html#3250" class="Bound">a</a> <a id="3266" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3268" class="Number">0</a>
  <a id="3272" href="Ledger.TokenAlgebra.ValueSet.html#3235" class="Function">lookupι≡0</a> <a id="3282" class="Symbol">=</a> <a id="3284" href="Axiom.Set.TotalMap.html#1225" class="Function">∈-rel⇒lookup-≡</a> <a id="3299" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a> <a id="3301" class="Symbol">(</a><a id="3302" href="Axiom.Set.html#5015" class="Function">∈-map′</a> <a id="3309" href="Ledger.TokenAlgebra.ValueSet.html#2727" class="Bound">⋁A</a><a id="3311" class="Symbol">)</a>

  <a id="3316" href="Ledger.TokenAlgebra.ValueSet.html#3316" class="Function Operator">_≋_</a> <a id="3320" class="Symbol">:</a> <a id="3322" href="Relation.Binary.Core.html#882" class="Function">stdlib.Rel</a> <a id="3333" class="Symbol">(</a><a id="3334" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="3342" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="3344" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a><a id="3352" class="Symbol">)</a> <a id="3354" href="Level.html#512" class="Function">0ℓ</a>
  <a id="3359" href="Ledger.TokenAlgebra.ValueSet.html#3359" class="Bound">u</a> <a id="3361" href="Ledger.TokenAlgebra.ValueSet.html#3316" class="Function Operator">≋</a> <a id="3363" href="Ledger.TokenAlgebra.ValueSet.html#3363" class="Bound">v</a> <a id="3365" class="Symbol">=</a> <a id="3367" class="Symbol">∀{</a><a id="3369" href="Ledger.TokenAlgebra.ValueSet.html#3369" class="Bound">aa</a><a id="3371" class="Symbol">}</a> <a id="3373" class="Symbol">→</a> <a id="3375" class="Symbol">(</a><a id="3376" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3383" href="Ledger.TokenAlgebra.ValueSet.html#3359" class="Bound">u</a><a id="3384" class="Symbol">)</a> <a id="3386" href="Ledger.TokenAlgebra.ValueSet.html#3369" class="Bound">aa</a> <a id="3389" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="3391" class="Symbol">(</a><a id="3392" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3399" href="Ledger.TokenAlgebra.ValueSet.html#3363" class="Bound">v</a><a id="3400" class="Symbol">)</a> <a id="3402" href="Ledger.TokenAlgebra.ValueSet.html#3369" class="Bound">aa</a>

  <a id="3408" href="Ledger.TokenAlgebra.ValueSet.html#3408" class="Function">≋-isEquivalence</a> <a id="3424" class="Symbol">:</a> <a id="3426" href="Relation.Binary.Structures.html#1536" class="Record">IsEquivalence</a> <a id="3440" class="Symbol">{</a><a id="3441" href="Level.html#512" class="Function">0ℓ</a><a id="3443" class="Symbol">}</a> <a id="3445" href="Ledger.TokenAlgebra.ValueSet.html#3316" class="Function Operator">_≋_</a>
  <a id="3451" href="Ledger.TokenAlgebra.ValueSet.html#3408" class="Function">≋-isEquivalence</a> <a id="3467" class="Symbol">=</a> <a id="3469" class="Keyword">record</a> <a id="3476" class="Symbol">{</a> <a id="3478" href="Relation.Binary.Structures.html#1582" class="Field">refl</a> <a id="3483" class="Symbol">=</a> <a id="3485" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">≡.refl</a> <a id="3492" class="Symbol">;</a> <a id="3494" href="Relation.Binary.Structures.html#1608" class="Field">sym</a> <a id="3498" class="Symbol">=</a> <a id="3500" class="Symbol">λ</a> <a id="3502" href="Ledger.TokenAlgebra.ValueSet.html#3502" class="Bound">x</a> <a id="3504" class="Symbol">→</a> <a id="3506" href="Relation.Binary.PropositionalEquality.Core.html#1698" class="Function">≡.sym</a> <a id="3512" href="Ledger.TokenAlgebra.ValueSet.html#3502" class="Bound">x</a> <a id="3514" class="Symbol">;</a> <a id="3516" href="Relation.Binary.Structures.html#1634" class="Field">trans</a> <a id="3522" class="Symbol">=</a> <a id="3524" class="Symbol">λ</a> <a id="3526" href="Ledger.TokenAlgebra.ValueSet.html#3526" class="Bound">x</a> <a id="3528" href="Ledger.TokenAlgebra.ValueSet.html#3528" class="Bound">y</a> <a id="3530" class="Symbol">→</a> <a id="3532" href="Relation.Binary.PropositionalEquality.Core.html#1743" class="Function">≡.trans</a> <a id="3540" href="Ledger.TokenAlgebra.ValueSet.html#3526" class="Bound">x</a> <a id="3542" href="Ledger.TokenAlgebra.ValueSet.html#3528" class="Bound">y</a> <a id="3544" class="Symbol">}</a>

  <a id="3549" href="Ledger.TokenAlgebra.ValueSet.html#3549" class="Function">⊕-cong</a> <a id="3556" class="Symbol">:</a> <a id="3558" href="Algebra.Definitions.html#1187" class="Function">Algebra.Congruent₂</a> <a id="3577" href="Ledger.TokenAlgebra.ValueSet.html#3316" class="Function Operator">_≋_</a> <a id="3581" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">_⊕_</a>
  <a id="3587" href="Ledger.TokenAlgebra.ValueSet.html#3549" class="Function">⊕-cong</a> <a id="3594" class="Symbol">{</a><a id="3595" href="Ledger.TokenAlgebra.ValueSet.html#3595" class="Bound">x</a><a id="3596" class="Symbol">}{</a><a id="3598" href="Ledger.TokenAlgebra.ValueSet.html#3598" class="Bound">y</a><a id="3599" class="Symbol">}{</a><a id="3601" href="Ledger.TokenAlgebra.ValueSet.html#3601" class="Bound">u</a><a id="3602" class="Symbol">}{</a><a id="3604" href="Ledger.TokenAlgebra.ValueSet.html#3604" class="Bound">v</a><a id="3605" class="Symbol">}</a> <a id="3607" href="Ledger.TokenAlgebra.ValueSet.html#3607" class="Bound">x≋y</a> <a id="3611" href="Ledger.TokenAlgebra.ValueSet.html#3611" class="Bound">u≋v</a> <a id="3615" class="Symbol">{</a><a id="3616" href="Ledger.TokenAlgebra.ValueSet.html#3616" class="Bound">a</a><a id="3617" class="Symbol">}</a> <a id="3619" class="Symbol">=</a> <a id="3621" href="Relation.Binary.PropositionalEquality.Core.html#2820" class="Function Operator">begin</a>
    <a id="3631" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3638" class="Symbol">(</a><a id="3639" href="Ledger.TokenAlgebra.ValueSet.html#3595" class="Bound">x</a> <a id="3641" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="3643" href="Ledger.TokenAlgebra.ValueSet.html#3601" class="Bound">u</a><a id="3644" class="Symbol">)</a> <a id="3646" href="Ledger.TokenAlgebra.ValueSet.html#3616" class="Bound">a</a>         <a id="3656" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="3659" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="3667" href="Ledger.TokenAlgebra.ValueSet.html#3595" class="Bound">x</a> <a id="3669" href="Ledger.TokenAlgebra.ValueSet.html#3601" class="Bound">u</a> <a id="3671" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="3677" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3684" href="Ledger.TokenAlgebra.ValueSet.html#3595" class="Bound">x</a> <a id="3686" href="Ledger.TokenAlgebra.ValueSet.html#3616" class="Bound">a</a> <a id="3688" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="3690" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3697" href="Ledger.TokenAlgebra.ValueSet.html#3601" class="Bound">u</a> <a id="3699" href="Ledger.TokenAlgebra.ValueSet.html#3616" class="Bound">a</a>  <a id="3702" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="3705" href="Relation.Binary.PropositionalEquality.Core.html#1381" class="Function">cong₂</a> <a id="3711" href="Interface.HasAdd.html#135" class="Field Operator">_+_</a> <a id="3715" href="Ledger.TokenAlgebra.ValueSet.html#3607" class="Bound">x≋y</a> <a id="3719" href="Ledger.TokenAlgebra.ValueSet.html#3611" class="Bound">u≋v</a> <a id="3723" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="3729" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3736" href="Ledger.TokenAlgebra.ValueSet.html#3598" class="Bound">y</a> <a id="3738" href="Ledger.TokenAlgebra.ValueSet.html#3616" class="Bound">a</a> <a id="3740" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="3742" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3749" href="Ledger.TokenAlgebra.ValueSet.html#3604" class="Bound">v</a> <a id="3751" href="Ledger.TokenAlgebra.ValueSet.html#3616" class="Bound">a</a>  <a id="3754" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="3757" href="Relation.Binary.PropositionalEquality.Core.html#1698" class="Function">≡.sym</a> <a id="3763" class="Symbol">(</a><a id="3764" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="3772" href="Ledger.TokenAlgebra.ValueSet.html#3598" class="Bound">y</a> <a id="3774" href="Ledger.TokenAlgebra.ValueSet.html#3604" class="Bound">v</a><a id="3775" class="Symbol">)</a> <a id="3777" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="3783" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3790" class="Symbol">(</a><a id="3791" href="Ledger.TokenAlgebra.ValueSet.html#3598" class="Bound">y</a> <a id="3793" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="3795" href="Ledger.TokenAlgebra.ValueSet.html#3604" class="Bound">v</a><a id="3796" class="Symbol">)</a> <a id="3798" href="Ledger.TokenAlgebra.ValueSet.html#3616" class="Bound">a</a>         <a id="3808" href="Relation.Binary.PropositionalEquality.Core.html#3119" class="Function Operator">∎</a>

  <a id="3813" href="Ledger.TokenAlgebra.ValueSet.html#3813" class="Function">⊕-comm</a> <a id="3820" class="Symbol">:</a> <a id="3822" href="Algebra.Definitions.html#1520" class="Function">Algebra.Commutative</a> <a id="3842" href="Ledger.TokenAlgebra.ValueSet.html#3316" class="Function Operator">_≋_</a> <a id="3846" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">_⊕_</a>
  <a id="3852" href="Ledger.TokenAlgebra.ValueSet.html#3813" class="Function">⊕-comm</a> <a id="3859" href="Ledger.TokenAlgebra.ValueSet.html#3859" class="Bound">u</a> <a id="3861" href="Ledger.TokenAlgebra.ValueSet.html#3861" class="Bound">v</a> <a id="3863" class="Symbol">{</a><a id="3864" href="Ledger.TokenAlgebra.ValueSet.html#3864" class="Bound">aa</a><a id="3866" class="Symbol">}</a> <a id="3868" class="Symbol">=</a> <a id="3870" href="Relation.Binary.PropositionalEquality.Core.html#2820" class="Function Operator">begin</a>
    <a id="3880" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3887" class="Symbol">(</a><a id="3888" href="Ledger.TokenAlgebra.ValueSet.html#3859" class="Bound">u</a> <a id="3890" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="3892" href="Ledger.TokenAlgebra.ValueSet.html#3861" class="Bound">v</a><a id="3893" class="Symbol">)</a> <a id="3895" href="Ledger.TokenAlgebra.ValueSet.html#3864" class="Bound">aa</a>          <a id="3907" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="3910" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="3918" href="Ledger.TokenAlgebra.ValueSet.html#3859" class="Bound">u</a> <a id="3920" href="Ledger.TokenAlgebra.ValueSet.html#3861" class="Bound">v</a> <a id="3922" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="3928" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3935" href="Ledger.TokenAlgebra.ValueSet.html#3859" class="Bound">u</a> <a id="3937" href="Ledger.TokenAlgebra.ValueSet.html#3864" class="Bound">aa</a> <a id="3940" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="3942" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3949" href="Ledger.TokenAlgebra.ValueSet.html#3861" class="Bound">v</a> <a id="3951" href="Ledger.TokenAlgebra.ValueSet.html#3864" class="Bound">aa</a>  <a id="3955" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="3958" href="Data.Nat.Properties.html#14777" class="Function">+-comm</a> <a id="3965" class="Symbol">(</a><a id="3966" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3973" href="Ledger.TokenAlgebra.ValueSet.html#3859" class="Bound">u</a> <a id="3975" href="Ledger.TokenAlgebra.ValueSet.html#3864" class="Bound">aa</a><a id="3977" class="Symbol">)</a> <a id="3979" class="Symbol">(</a><a id="3980" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="3987" href="Ledger.TokenAlgebra.ValueSet.html#3861" class="Bound">v</a> <a id="3989" href="Ledger.TokenAlgebra.ValueSet.html#3864" class="Bound">aa</a><a id="3991" class="Symbol">)</a> <a id="3993" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="3999" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4006" href="Ledger.TokenAlgebra.ValueSet.html#3861" class="Bound">v</a> <a id="4008" href="Ledger.TokenAlgebra.ValueSet.html#3864" class="Bound">aa</a> <a id="4011" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="4013" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4020" href="Ledger.TokenAlgebra.ValueSet.html#3859" class="Bound">u</a> <a id="4022" href="Ledger.TokenAlgebra.ValueSet.html#3864" class="Bound">aa</a>  <a id="4026" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="4029" href="Relation.Binary.PropositionalEquality.Core.html#1698" class="Function">≡.sym</a> <a id="4035" class="Symbol">(</a><a id="4036" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="4044" href="Ledger.TokenAlgebra.ValueSet.html#3861" class="Bound">v</a> <a id="4046" href="Ledger.TokenAlgebra.ValueSet.html#3859" class="Bound">u</a><a id="4047" class="Symbol">)</a> <a id="4049" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="4055" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4062" class="Symbol">(</a><a id="4063" href="Ledger.TokenAlgebra.ValueSet.html#3861" class="Bound">v</a> <a id="4065" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="4067" href="Ledger.TokenAlgebra.ValueSet.html#3859" class="Bound">u</a><a id="4068" class="Symbol">)</a> <a id="4070" href="Ledger.TokenAlgebra.ValueSet.html#3864" class="Bound">aa</a>          <a id="4082" href="Relation.Binary.PropositionalEquality.Core.html#3119" class="Function Operator">∎</a>

  <a id="4087" href="Ledger.TokenAlgebra.ValueSet.html#4087" class="Function">⊕-assoc</a> <a id="4095" class="Symbol">:</a> <a id="4097" href="Algebra.Definitions.html#1433" class="Function">Algebra.Associative</a> <a id="4117" href="Ledger.TokenAlgebra.ValueSet.html#3316" class="Function Operator">_≋_</a> <a id="4121" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">_⊕_</a>
  <a id="4127" href="Ledger.TokenAlgebra.ValueSet.html#4087" class="Function">⊕-assoc</a> <a id="4135" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4137" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a> <a id="4139" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a> <a id="4141" class="Symbol">{</a><a id="4142" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a><a id="4143" class="Symbol">}</a> <a id="4145" class="Symbol">=</a> <a id="4147" href="Relation.Binary.PropositionalEquality.Core.html#2820" class="Function Operator">begin</a>
    <a id="4157" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4164" class="Symbol">((</a><a id="4166" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4168" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="4170" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a><a id="4171" class="Symbol">)</a> <a id="4173" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="4175" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a><a id="4176" class="Symbol">)</a> <a id="4178" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a>                  <a id="4197" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="4200" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="4208" class="Symbol">(</a><a id="4209" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4211" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="4213" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a><a id="4214" class="Symbol">)</a> <a id="4216" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a> <a id="4218" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="4224" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4231" class="Symbol">(</a><a id="4232" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4234" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="4236" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a><a id="4237" class="Symbol">)</a> <a id="4239" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a> <a id="4241" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="4243" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4250" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a> <a id="4252" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a>           <a id="4264" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="4267" href="Relation.Binary.PropositionalEquality.Core.html#1144" class="Function">cong</a> <a id="4272" class="Symbol">(</a><a id="4273" href="Interface.HasAdd.html#135" class="Field Operator">_+</a> <a id="4276" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4283" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a> <a id="4285" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a><a id="4286" class="Symbol">)</a> <a id="4288" class="Symbol">(</a><a id="4289" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="4297" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4299" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a><a id="4300" class="Symbol">)</a> <a id="4302" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="4308" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4315" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4317" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a> <a id="4319" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="4321" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4328" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a> <a id="4330" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a> <a id="4332" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="4334" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4341" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a> <a id="4343" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a>    <a id="4348" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="4351" href="Data.Nat.Properties.html#14444" class="Function">+-assoc</a> <a id="4359" class="Symbol">(</a><a id="4360" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4367" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4369" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a><a id="4370" class="Symbol">)</a> <a id="4372" class="Symbol">(</a><a id="4373" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4380" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a> <a id="4382" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a><a id="4383" class="Symbol">)</a> <a id="4385" class="Symbol">(</a><a id="4386" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4393" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a> <a id="4395" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a><a id="4396" class="Symbol">)</a> <a id="4398" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="4404" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4411" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4413" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a> <a id="4415" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="4417" class="Symbol">(</a><a id="4418" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4425" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a> <a id="4427" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a> <a id="4429" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="4431" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4438" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a> <a id="4440" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a><a id="4441" class="Symbol">)</a>  <a id="4444" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="4447" href="Relation.Binary.PropositionalEquality.Core.html#1144" class="Function">cong</a> <a id="4452" class="Symbol">(</a><a id="4453" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4460" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4462" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a> <a id="4464" href="Interface.HasAdd.html#135" class="Field Operator">+_</a><a id="4466" class="Symbol">)</a> <a id="4468" class="Symbol">(</a><a id="4469" href="Relation.Binary.PropositionalEquality.Core.html#1698" class="Function">≡.sym</a> <a id="4475" class="Symbol">(</a><a id="4476" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="4484" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a> <a id="4486" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a><a id="4487" class="Symbol">))</a> <a id="4490" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="4496" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4503" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4505" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a> <a id="4507" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="4509" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4516" class="Symbol">(</a><a id="4517" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a> <a id="4519" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="4521" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a><a id="4522" class="Symbol">)</a> <a id="4524" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a>           <a id="4536" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="4539" href="Relation.Binary.PropositionalEquality.Core.html#1698" class="Function">≡.sym</a> <a id="4545" class="Symbol">(</a><a id="4546" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="4554" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4556" class="Symbol">(</a><a id="4557" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a> <a id="4559" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="4561" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a><a id="4562" class="Symbol">))</a> <a id="4565" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="4571" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4578" class="Symbol">(</a><a id="4579" href="Ledger.TokenAlgebra.ValueSet.html#4135" class="Bound">x</a> <a id="4581" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="4583" class="Symbol">(</a><a id="4584" href="Ledger.TokenAlgebra.ValueSet.html#4137" class="Bound">y</a> <a id="4586" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="4588" href="Ledger.TokenAlgebra.ValueSet.html#4139" class="Bound">z</a><a id="4589" class="Symbol">))</a> <a id="4592" href="Ledger.TokenAlgebra.ValueSet.html#4142" class="Bound">a</a>                  <a id="4611" href="Relation.Binary.PropositionalEquality.Core.html#3119" class="Function Operator">∎</a>

  <a id="4616" href="Ledger.TokenAlgebra.ValueSet.html#4616" class="Function">ι-identity</a> <a id="4627" class="Symbol">:</a> <a id="4629" href="Algebra.Definitions.html#1741" class="Function">Algebra.Identity</a> <a id="4646" href="Ledger.TokenAlgebra.ValueSet.html#3316" class="Function Operator">_≋_</a> <a id="4650" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a> <a id="4652" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">_⊕_</a>
  <a id="4658" href="Ledger.TokenAlgebra.ValueSet.html#4616" class="Function">ι-identity</a> <a id="4669" class="Symbol">.</a><a id="4670" href="Data.Product.Base.html#608" class="Field">proj₁</a> <a id="4676" href="Ledger.TokenAlgebra.ValueSet.html#4676" class="Bound">tm</a> <a id="4679" class="Symbol">{</a><a id="4680" href="Ledger.TokenAlgebra.ValueSet.html#4680" class="Bound">aa</a><a id="4682" class="Symbol">}</a> <a id="4684" class="Symbol">=</a> <a id="4686" href="Relation.Binary.PropositionalEquality.Core.html#2820" class="Function Operator">begin</a>
    <a id="4696" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4703" class="Symbol">(</a><a id="4704" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a> <a id="4706" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="4708" href="Ledger.TokenAlgebra.ValueSet.html#4676" class="Bound">tm</a><a id="4710" class="Symbol">)</a> <a id="4712" href="Ledger.TokenAlgebra.ValueSet.html#4680" class="Bound">aa</a>          <a id="4724" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="4727" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="4735" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a> <a id="4737" href="Ledger.TokenAlgebra.ValueSet.html#4676" class="Bound">tm</a> <a id="4740" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="4746" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4753" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a> <a id="4755" href="Ledger.TokenAlgebra.ValueSet.html#4680" class="Bound">aa</a> <a id="4758" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="4760" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4767" href="Ledger.TokenAlgebra.ValueSet.html#4676" class="Bound">tm</a> <a id="4770" href="Ledger.TokenAlgebra.ValueSet.html#4680" class="Bound">aa</a>  <a id="4774" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="4777" href="Relation.Binary.PropositionalEquality.Core.html#1144" class="Function">cong</a> <a id="4782" class="Symbol">(</a><a id="4783" href="Interface.HasAdd.html#135" class="Field Operator">_+</a> <a id="4786" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4793" href="Ledger.TokenAlgebra.ValueSet.html#4676" class="Bound">tm</a> <a id="4796" href="Ledger.TokenAlgebra.ValueSet.html#4680" class="Bound">aa</a><a id="4798" class="Symbol">)</a> <a id="4800" href="Ledger.TokenAlgebra.ValueSet.html#3235" class="Function">lookupι≡0</a> <a id="4810" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="4816" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4823" href="Ledger.TokenAlgebra.ValueSet.html#4676" class="Bound">tm</a> <a id="4826" href="Ledger.TokenAlgebra.ValueSet.html#4680" class="Bound">aa</a>                <a id="4844" href="Relation.Binary.PropositionalEquality.Core.html#3119" class="Function Operator">∎</a>
  <a id="4848" href="Ledger.TokenAlgebra.ValueSet.html#4616" class="Function">ι-identity</a> <a id="4859" class="Symbol">.</a><a id="4860" href="Data.Product.Base.html#622" class="Field">proj₂</a> <a id="4866" href="Ledger.TokenAlgebra.ValueSet.html#4866" class="Bound">tm</a> <a id="4869" class="Symbol">{</a><a id="4870" href="Ledger.TokenAlgebra.ValueSet.html#4870" class="Bound">aa</a><a id="4872" class="Symbol">}</a> <a id="4874" class="Symbol">=</a> <a id="4876" href="Relation.Binary.PropositionalEquality.Core.html#2820" class="Function Operator">begin</a>
    <a id="4886" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4893" class="Symbol">(</a><a id="4894" href="Ledger.TokenAlgebra.ValueSet.html#4866" class="Bound">tm</a> <a id="4897" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">⊕</a> <a id="4899" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a><a id="4900" class="Symbol">)</a> <a id="4902" href="Ledger.TokenAlgebra.ValueSet.html#4870" class="Bound">aa</a>          <a id="4914" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="4917" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="4925" href="Ledger.TokenAlgebra.ValueSet.html#4866" class="Bound">tm</a> <a id="4928" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a> <a id="4930" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="4936" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4943" href="Ledger.TokenAlgebra.ValueSet.html#4866" class="Bound">tm</a> <a id="4946" href="Ledger.TokenAlgebra.ValueSet.html#4870" class="Bound">aa</a> <a id="4949" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="4951" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4958" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a> <a id="4960" href="Ledger.TokenAlgebra.ValueSet.html#4870" class="Bound">aa</a>  <a id="4964" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="4967" href="Relation.Binary.PropositionalEquality.Core.html#1144" class="Function">cong</a> <a id="4972" class="Symbol">(</a><a id="4973" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="4980" href="Ledger.TokenAlgebra.ValueSet.html#4866" class="Bound">tm</a> <a id="4983" href="Ledger.TokenAlgebra.ValueSet.html#4870" class="Bound">aa</a> <a id="4986" href="Interface.HasAdd.html#135" class="Field Operator">+_</a><a id="4988" class="Symbol">)</a> <a id="4990" href="Ledger.TokenAlgebra.ValueSet.html#3235" class="Function">lookupι≡0</a> <a id="5000" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="5006" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="5013" href="Ledger.TokenAlgebra.ValueSet.html#4866" class="Bound">tm</a> <a id="5016" href="Ledger.TokenAlgebra.ValueSet.html#4870" class="Bound">aa</a> <a id="5019" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="5021" class="Number">0</a>            <a id="5034" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">≡⟨</a> <a id="5037" href="Data.Nat.Properties.html#14600" class="Function">+-identityʳ</a> <a id="5049" class="Symbol">(</a><a id="5050" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="5057" href="Ledger.TokenAlgebra.ValueSet.html#4866" class="Bound">tm</a> <a id="5060" href="Ledger.TokenAlgebra.ValueSet.html#4870" class="Bound">aa</a><a id="5062" class="Symbol">)</a> <a id="5064" href="Relation.Binary.PropositionalEquality.Core.html#2937" class="Function">⟩</a>
    <a id="5070" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="5077" href="Ledger.TokenAlgebra.ValueSet.html#4866" class="Bound">tm</a> <a id="5080" href="Ledger.TokenAlgebra.ValueSet.html#4870" class="Bound">aa</a>                <a id="5098" href="Relation.Binary.PropositionalEquality.Core.html#3119" class="Function Operator">∎</a>

  <a id="5103" class="Keyword">open</a> <a id="5108" href="Algebra.Structures.html#2789" class="Module">IsSemigroup</a>
  <a id="5122" class="Keyword">open</a> <a id="5127" href="Algebra.Structures.html#1117" class="Module">IsMagma</a>
  <a id="5137" href="Ledger.TokenAlgebra.ValueSet.html#5137" class="Function">isSemigrp</a> <a id="5147" class="Symbol">:</a> <a id="5149" href="Algebra.Structures.html#2789" class="Record">IsSemigroup</a> <a id="5161" href="Ledger.TokenAlgebra.ValueSet.html#3316" class="Function Operator">_≋_</a> <a id="5165" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">_⊕_</a>
  <a id="5171" href="Ledger.TokenAlgebra.ValueSet.html#5137" class="Function">isSemigrp</a> <a id="5181" class="Symbol">.</a><a id="5182" href="Algebra.Structures.html#2845" class="Field">isMagma</a> <a id="5190" class="Symbol">.</a><a id="5191" href="Algebra.Structures.html#1169" class="Field">isEquivalence</a>        <a id="5212" class="Symbol">=</a> <a id="5214" href="Ledger.TokenAlgebra.ValueSet.html#3408" class="Function">≋-isEquivalence</a>
  <a id="5232" href="Ledger.TokenAlgebra.ValueSet.html#5137" class="Function">isSemigrp</a> <a id="5242" class="Symbol">.</a><a id="5243" href="Algebra.Structures.html#2845" class="Field">isMagma</a> <a id="5251" class="Symbol">.</a><a id="5252" href="Algebra.Structures.html#1207" class="Field">∙-cong</a> <a id="5259" class="Symbol">{</a><a id="5260" href="Ledger.TokenAlgebra.ValueSet.html#5260" class="Bound">u</a><a id="5261" class="Symbol">}{</a><a id="5263" href="Ledger.TokenAlgebra.ValueSet.html#5263" class="Bound">v</a><a id="5264" class="Symbol">}{</a><a id="5266" href="Ledger.TokenAlgebra.ValueSet.html#5266" class="Bound">x</a><a id="5267" class="Symbol">}{</a><a id="5269" href="Ledger.TokenAlgebra.ValueSet.html#5269" class="Bound">y</a><a id="5270" class="Symbol">}</a>  <a id="5273" class="Symbol">=</a> <a id="5275" href="Ledger.TokenAlgebra.ValueSet.html#3549" class="Function">⊕-cong</a> <a id="5282" class="Symbol">{</a><a id="5283" href="Ledger.TokenAlgebra.ValueSet.html#5260" class="Bound">u</a><a id="5284" class="Symbol">}{</a><a id="5286" href="Ledger.TokenAlgebra.ValueSet.html#5263" class="Bound">v</a><a id="5287" class="Symbol">}{</a><a id="5289" href="Ledger.TokenAlgebra.ValueSet.html#5266" class="Bound">x</a><a id="5290" class="Symbol">}{</a><a id="5292" href="Ledger.TokenAlgebra.ValueSet.html#5269" class="Bound">y</a><a id="5293" class="Symbol">}</a>
  <a id="5297" href="Ledger.TokenAlgebra.ValueSet.html#5137" class="Function">isSemigrp</a> <a id="5307" class="Symbol">.</a><a id="5308" href="Algebra.Structures.html#2869" class="Field">assoc</a>                         <a id="5338" class="Symbol">=</a> <a id="5340" href="Ledger.TokenAlgebra.ValueSet.html#4087" class="Function">⊕-assoc</a>

  <a id="5351" class="Keyword">open</a> <a id="5356" href="Algebra.Structures.html#3866" class="Module">IsMonoid</a>
  <a id="5367" href="Ledger.TokenAlgebra.ValueSet.html#5367" class="Function">≋-⊕-ι-isMonoid</a> <a id="5382" class="Symbol">:</a> <a id="5384" href="Algebra.Structures.html#3866" class="Record">IsMonoid</a> <a id="5393" href="Ledger.TokenAlgebra.ValueSet.html#3316" class="Function Operator">_≋_</a> <a id="5397" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">_⊕_</a> <a id="5401" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a>
  <a id="5405" href="Ledger.TokenAlgebra.ValueSet.html#5367" class="Function">≋-⊕-ι-isMonoid</a> <a id="5420" class="Symbol">.</a><a id="5421" href="Algebra.Structures.html#3927" class="Field">isSemigroup</a>  <a id="5434" class="Symbol">=</a> <a id="5436" href="Ledger.TokenAlgebra.ValueSet.html#5137" class="Function">isSemigrp</a>
  <a id="5448" href="Ledger.TokenAlgebra.ValueSet.html#5367" class="Function">≋-⊕-ι-isMonoid</a> <a id="5463" class="Symbol">.</a><a id="5464" href="Algebra.Structures.html#3959" class="Field">identity</a>     <a id="5477" class="Symbol">=</a> <a id="5479" href="Ledger.TokenAlgebra.ValueSet.html#4616" class="Function">ι-identity</a>
<a id="5490" class="Markup">\end{code}</a><a id="5500" class="Background">

We are now in a position to define the commutative monoid.

</a><a id="5562" class="Markup">\begin{code}</a>
  <a id="5577" class="Keyword">open</a> <a id="5582" href="Algebra.Structures.html#4276" class="Module">IsCommutativeMonoid</a>
  <a id="5604" href="Ledger.TokenAlgebra.ValueSet.html#5604" class="Function">Vcm</a> <a id="5608" class="Symbol">:</a> <a id="5610" href="Algebra.Bundles.html#6578" class="Record">CommutativeMonoid</a> <a id="5628" href="Level.html#512" class="Function">0ℓ</a> <a id="5631" href="Level.html#512" class="Function">0ℓ</a>
  <a id="5636" href="Ledger.TokenAlgebra.ValueSet.html#5604" class="Function">Vcm</a> <a id="5640" class="Symbol">.</a><a id="5641" href="Algebra.Bundles.html#6668" class="Field">Carrier</a>                        <a id="5672" class="Symbol">=</a> <a id="5674" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="5682" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="5684" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a>
  <a id="5695" href="Ledger.TokenAlgebra.ValueSet.html#5604" class="Function">Vcm</a> <a id="5699" class="Symbol">.</a><a id="5700" href="Algebra.Bundles.html#6700" class="Field Operator">_≈_</a>                            <a id="5731" class="Symbol">=</a> <a id="5733" href="Ledger.TokenAlgebra.ValueSet.html#3316" class="Function Operator">_≋_</a>
  <a id="5739" href="Ledger.TokenAlgebra.ValueSet.html#5604" class="Function">Vcm</a> <a id="5743" class="Symbol">.</a><a id="5744" href="Ledger.TokenAlgebra.ValueSet.html#2616" class="Field Operator">_⋆_</a>                            <a id="5775" class="Symbol">=</a> <a id="5777" href="Ledger.TokenAlgebra.ValueSet.html#2881" class="Function Operator">_⊕_</a>
  <a id="5783" href="Ledger.TokenAlgebra.ValueSet.html#5604" class="Function">Vcm</a> <a id="5787" class="Symbol">.</a><a id="5788" href="Algebra.Bundles.html#6778" class="Field">ε</a>                              <a id="5819" class="Symbol">=</a> <a id="5821" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a>
  <a id="5825" href="Ledger.TokenAlgebra.ValueSet.html#5604" class="Function">Vcm</a> <a id="5829" class="Symbol">.</a><a id="5830" href="Algebra.Bundles.html#6812" class="Field">isCommutativeMonoid</a> <a id="5850" class="Symbol">.</a><a id="5851" href="Algebra.Structures.html#4348" class="Field">isMonoid</a>  <a id="5861" class="Symbol">=</a> <a id="5863" href="Ledger.TokenAlgebra.ValueSet.html#5367" class="Function">≋-⊕-ι-isMonoid</a>
  <a id="5880" href="Ledger.TokenAlgebra.ValueSet.html#5604" class="Function">Vcm</a> <a id="5884" class="Symbol">.</a><a id="5885" href="Algebra.Bundles.html#6812" class="Field">isCommutativeMonoid</a> <a id="5905" class="Symbol">.</a><a id="5906" href="Algebra.Structures.html#4376" class="Field">comm</a>      <a id="5916" class="Symbol">=</a> <a id="5918" href="Ledger.TokenAlgebra.ValueSet.html#3813" class="Function">⊕-comm</a>

  <a id="5928" href="Ledger.TokenAlgebra.ValueSet.html#5928" class="Function">Value-TokenAlgebra</a> <a id="5947" class="Symbol">:</a>  <a id="5950" class="Symbol">(</a><a id="5951" href="Ledger.TokenAlgebra.ValueSet.html#5951" class="Bound">specialPolicy</a> <a id="5965" class="Symbol">:</a> <a id="5967" href="Ledger.TokenAlgebra.ValueSet.html#217" class="Bound">PolicyId</a><a id="5975" class="Symbol">)</a>
                        <a id="6001" class="Symbol">(</a><a id="6002" href="Ledger.TokenAlgebra.ValueSet.html#6002" class="Bound">specialAsset</a> <a id="6015" class="Symbol">:</a> <a id="6017" href="Ledger.TokenAlgebra.ValueSet.html#226" class="Bound">AssetName</a><a id="6026" class="Symbol">)</a>
                        <a id="6052" class="Symbol">(</a><a id="6053" href="Ledger.TokenAlgebra.ValueSet.html#6053" class="Bound">size</a> <a id="6058" class="Symbol">:</a> <a id="6060" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="6068" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="6070" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a> <a id="6079" class="Symbol">→</a> <a id="6081" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="6082" class="Symbol">)</a>
                        <a id="6108" class="Symbol">{</a><a id="6109" href="Ledger.TokenAlgebra.ValueSet.html#6109" class="Bound">decTot</a> <a id="6116" class="Symbol">:</a> <a id="6118" href="Interface.DecEq.html#185" class="Record">DecEq</a> <a id="6124" class="Symbol">(</a><a id="6125" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="6133" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="6135" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a><a id="6143" class="Symbol">)}</a>
                        <a id="6170" class="Comment">--------------------------------------</a>
                        <a id="6233" class="Symbol">→</a> <a id="6235" href="Ledger.TokenAlgebra.html#499" class="Record">TokenAlgebra</a>

  <a id="6251" href="Ledger.TokenAlgebra.ValueSet.html#5928" class="Function">Value-TokenAlgebra</a> <a id="6270" href="Ledger.TokenAlgebra.ValueSet.html#6270" class="Bound">specialPolicy</a> <a id="6284" href="Ledger.TokenAlgebra.ValueSet.html#6284" class="Bound">specialAsset</a> <a id="6297" href="Ledger.TokenAlgebra.ValueSet.html#6297" class="Bound">size</a> <a id="6302" class="Symbol">{</a><a id="6303" href="Ledger.TokenAlgebra.ValueSet.html#6303" class="Bound">decTot</a><a id="6309" class="Symbol">}</a> <a id="6311" class="Symbol">=</a>
    <a id="6317" class="Keyword">record</a>
      <a id="6330" class="Symbol">{</a> <a id="6332" href="Ledger.TokenAlgebra.html#534" class="Field">Value-CommutativeMonoid</a>   <a id="6358" class="Symbol">=</a> <a id="6360" href="Ledger.TokenAlgebra.ValueSet.html#5604" class="Function">Vcm</a>
      <a id="6370" class="Symbol">;</a> <a id="6372" href="Ledger.TokenAlgebra.html#924" class="Field">coin</a>                      <a id="6398" class="Symbol">=</a> <a id="6400" href="Ledger.TokenAlgebra.ValueSet.html#6931" class="Function">totalMap↠coin</a>
      <a id="6420" class="Symbol">;</a> <a id="6422" href="Ledger.TokenAlgebra.html#974" class="Field">inject</a>                    <a id="6448" class="Symbol">=</a> <a id="6450" href="Ledger.TokenAlgebra.ValueSet.html#7018" class="Function">coin↪totalMap</a>
      <a id="6470" class="Symbol">;</a> <a id="6472" href="Ledger.TokenAlgebra.html#1024" class="Field">policies</a>                  <a id="6498" class="Symbol">=</a> <a id="6500" href="Ledger.TokenAlgebra.ValueSet.html#7113" class="Function">policies</a>
      <a id="6515" class="Symbol">;</a> <a id="6517" href="Ledger.TokenAlgebra.html#1080" class="Field">size</a>                      <a id="6543" class="Symbol">=</a> <a id="6545" href="Ledger.TokenAlgebra.ValueSet.html#6297" class="Bound">size</a>
      <a id="6556" class="Symbol">;</a> <a id="6558" href="Ledger.TokenAlgebra.html#1140" class="Field Operator">_≤ᵗ_</a>                      <a id="6584" class="Symbol">=</a> <a id="6586" href="Ledger.TokenAlgebra.ValueSet.html#7199" class="Function">leq</a>
      <a id="6596" class="Symbol">;</a> <a id="6598" href="Ledger.TokenAlgebra.html#1197" class="Field">AssetName</a>                 <a id="6624" class="Symbol">=</a> <a id="6626" href="Ledger.TokenAlgebra.ValueSet.html#226" class="Bound">AssetName</a>
      <a id="6642" class="Symbol">;</a> <a id="6644" href="Ledger.TokenAlgebra.html#1238" class="Field">specialAsset</a>              <a id="6670" class="Symbol">=</a> <a id="6672" href="Ledger.TokenAlgebra.ValueSet.html#6284" class="Bound">specialAsset</a>
      <a id="6691" class="Symbol">;</a> <a id="6693" href="Ledger.TokenAlgebra.html#1285" class="Field">property</a>                  <a id="6719" class="Symbol">=</a> <a id="6721" href="Ledger.TokenAlgebra.ValueSet.html#7325" class="Function">compose-to-id</a>
      <a id="6741" class="Symbol">;</a> <a id="6743" href="Ledger.TokenAlgebra.html#1341" class="Field">coinIsMonoidHomomorphism</a>  <a id="6769" class="Symbol">=</a> <a id="6771" href="Ledger.TokenAlgebra.ValueSet.html#7911" class="Function">CoinMonHom</a>
      <a id="6788" class="Symbol">;</a> <a id="6790" href="Ledger.TokenAlgebra.html#1436" class="Field">DecEq-Value</a>               <a id="6816" class="Symbol">=</a> <a id="6818" href="Ledger.TokenAlgebra.ValueSet.html#6303" class="Bound">decTot</a>
      <a id="6831" class="Symbol">}</a>
    <a id="6837" class="Keyword">where</a>

    <a id="6848" href="Ledger.TokenAlgebra.ValueSet.html#6848" class="Function">specId</a> <a id="6855" class="Symbol">:</a> <a id="6857" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a>
    <a id="6869" href="Ledger.TokenAlgebra.ValueSet.html#6848" class="Function">specId</a> <a id="6876" class="Symbol">=</a> <a id="6878" class="Symbol">(</a><a id="6879" href="Ledger.TokenAlgebra.ValueSet.html#6270" class="Bound">specialPolicy</a> <a id="6893" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="6895" href="Ledger.TokenAlgebra.ValueSet.html#6284" class="Bound">specialAsset</a><a id="6907" class="Symbol">)</a>

    <a id="6914" class="Keyword">open</a> <a id="6919" href="Axiom.Set.TotalMap.html#1380" class="Module">Update</a>

    <a id="6931" href="Ledger.TokenAlgebra.ValueSet.html#6931" class="Function">totalMap↠coin</a> <a id="6945" class="Symbol">:</a> <a id="6947" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="6955" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="6957" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a> <a id="6966" class="Symbol">→</a> <a id="6968" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
    <a id="6977" href="Ledger.TokenAlgebra.ValueSet.html#6931" class="Function">totalMap↠coin</a> <a id="6991" href="Ledger.TokenAlgebra.ValueSet.html#6991" class="Bound">tm</a> <a id="6994" class="Symbol">=</a> <a id="6996" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="7003" href="Ledger.TokenAlgebra.ValueSet.html#6991" class="Bound">tm</a> <a id="7006" href="Ledger.TokenAlgebra.ValueSet.html#6848" class="Function">specId</a>

    <a id="7018" href="Ledger.TokenAlgebra.ValueSet.html#7018" class="Function">coin↪totalMap</a> <a id="7032" class="Symbol">:</a> <a id="7034" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a> <a id="7039" class="Symbol">→</a> <a id="7041" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="7049" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="7051" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a>
    <a id="7064" href="Ledger.TokenAlgebra.ValueSet.html#7018" class="Function">coin↪totalMap</a> <a id="7078" href="Ledger.TokenAlgebra.ValueSet.html#7078" class="Bound">c</a> <a id="7080" class="Symbol">=</a> <a id="7082" href="Axiom.Set.TotalMap.html#2029" class="Function">update</a> <a id="7089" class="Symbol">⦃</a> <a id="7091" href="Ledger.TokenAlgebra.ValueSet.html#2749" class="Bound">dec</a> <a id="7095" class="Symbol">⦄</a> <a id="7097" href="Ledger.TokenAlgebra.ValueSet.html#6848" class="Function">specId</a> <a id="7104" href="Ledger.TokenAlgebra.ValueSet.html#7078" class="Bound">c</a> <a id="7106" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a>

    <a id="7113" href="Ledger.TokenAlgebra.ValueSet.html#7113" class="Function">policies</a> <a id="7122" class="Symbol">:</a> <a id="7124" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="7132" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="7134" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a> <a id="7143" class="Symbol">→</a> <a id="7145" href="Ledger.Prelude.html#1514" class="Function Operator">ℙ</a> <a id="7147" href="Ledger.TokenAlgebra.ValueSet.html#217" class="Bound">PolicyId</a>
    <a id="7160" href="Ledger.TokenAlgebra.ValueSet.html#7113" class="Function">policies</a> <a id="7169" href="Ledger.TokenAlgebra.ValueSet.html#7169" class="Bound">tm</a> <a id="7172" class="Symbol">=</a> <a id="7174" href="Ledger.Prelude.html#1544" class="Function">mapˢ</a> <a id="7179" href="Data.Product.Base.html#608" class="Field">proj₁</a> <a id="7185" href="Function.Base.html#1994" class="Function Operator">$</a> <a id="7187" href="Interface.IsSet.html#794" class="Function">dom</a> <a id="7191" href="Ledger.TokenAlgebra.ValueSet.html#7169" class="Bound">tm</a>

    <a id="7199" href="Ledger.TokenAlgebra.ValueSet.html#7199" class="Function">leq</a> <a id="7203" class="Symbol">:</a> <a id="7205" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="7213" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="7215" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a> <a id="7224" class="Symbol">→</a> <a id="7226" href="Ledger.TokenAlgebra.ValueSet.html#2650" class="Function">AssetId</a> <a id="7234" href="Ledger.TokenAlgebra.ValueSet.html#375" class="Record Operator">⇒</a> <a id="7236" href="Ledger.TokenAlgebra.ValueSet.html#2847" class="Function">Quantity</a> <a id="7245" class="Symbol">→</a> <a id="7247" href="Ledger.TokenAlgebra.ValueSet.html#173" class="Primitive">Type</a>
    <a id="7256" href="Ledger.TokenAlgebra.ValueSet.html#7199" class="Function">leq</a> <a id="7260" class="Symbol">=</a> <a id="7262" class="Symbol">λ</a> <a id="7264" href="Ledger.TokenAlgebra.ValueSet.html#7264" class="Bound">u</a> <a id="7266" href="Ledger.TokenAlgebra.ValueSet.html#7266" class="Bound">v</a> <a id="7268" class="Symbol">→</a> <a id="7270" class="Symbol">∀</a> <a id="7272" class="Symbol">{</a><a id="7273" href="Ledger.TokenAlgebra.ValueSet.html#7273" class="Bound">a</a><a id="7274" class="Symbol">}{</a><a id="7276" href="Ledger.TokenAlgebra.ValueSet.html#7276" class="Bound">p</a><a id="7277" class="Symbol">}{</a><a id="7279" href="Ledger.TokenAlgebra.ValueSet.html#7279" class="Bound">q</a><a id="7280" class="Symbol">}</a> <a id="7282" class="Symbol">→</a> <a id="7284" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="7291" href="Ledger.TokenAlgebra.ValueSet.html#7264" class="Bound">u</a> <a id="7293" class="Symbol">(</a><a id="7294" href="Ledger.TokenAlgebra.ValueSet.html#7273" class="Bound">a</a> <a id="7296" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="7298" href="Ledger.TokenAlgebra.ValueSet.html#7276" class="Bound">p</a><a id="7299" class="Symbol">)</a> <a id="7301" href="Interface.HasOrder.html#416" class="Field Operator">≤</a> <a id="7303" href="Axiom.Set.TotalMap.html#978" class="Function">lookup</a> <a id="7310" href="Ledger.TokenAlgebra.ValueSet.html#7266" class="Bound">v</a> <a id="7312" class="Symbol">(</a><a id="7313" href="Ledger.TokenAlgebra.ValueSet.html#7273" class="Bound">a</a> <a id="7315" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="7317" href="Ledger.TokenAlgebra.ValueSet.html#7279" class="Bound">q</a><a id="7318" class="Symbol">)</a>

    <a id="7325" href="Ledger.TokenAlgebra.ValueSet.html#7325" class="Function">compose-to-id</a> <a id="7339" class="Symbol">:</a> <a id="7341" href="Ledger.TokenAlgebra.ValueSet.html#6931" class="Function">totalMap↠coin</a> <a id="7355" href="Function.Base.html#1106" class="Function Operator">∘</a> <a id="7357" href="Ledger.TokenAlgebra.ValueSet.html#7018" class="Function">coin↪totalMap</a> <a id="7371" href="Relation.Binary.PropositionalEquality.html#1475" class="Function Operator">≗</a> <a id="7373" href="Function.Base.html#695" class="Function">id</a>
    <a id="7380" href="Ledger.TokenAlgebra.ValueSet.html#7325" class="Function">compose-to-id</a> <a id="7394" class="Symbol">_</a> <a id="7396" class="Symbol">=</a> <a id="7398" href="Axiom.Set.TotalMap.html#2428" class="Function">lookup-update-id</a> <a id="7415" href="Ledger.TokenAlgebra.ValueSet.html#3182" class="Function">ι</a>
      <a id="7423" class="Keyword">where</a> <a id="7429" class="Keyword">open</a> <a id="7434" href="Axiom.Set.TotalMap.html#2129" class="Module">LookupUpdate</a> <a id="7447" class="Symbol">{</a><a id="7448" class="Argument">X</a> <a id="7450" class="Symbol">=</a> <a id="7452" href="Ledger.TokenAlgebra.ValueSet.html#2709" class="Bound">X</a><a id="7453" class="Symbol">}</a> <a id="7455" class="Symbol">{</a><a id="7456" href="Ledger.TokenAlgebra.ValueSet.html#6848" class="Function">specId</a><a id="7462" class="Symbol">}</a> <a id="7464" class="Symbol">{</a><a id="7465" href="Ledger.TokenAlgebra.ValueSet.html#2727" class="Bound">⋁A</a><a id="7467" class="Symbol">}</a>

    <a id="7474" class="Keyword">open</a> <a id="7479" href="Algebra.Bundles.html#6578" class="Module">CommutativeMonoid</a> <a id="7497" href="Ledger.TokenAlgebra.ValueSet.html#5604" class="Function">Vcm</a>                    <a id="7520" class="Keyword">using</a> <a id="7526" class="Symbol">()</a> <a id="7529" class="Keyword">renaming</a> <a id="7538" class="Symbol">(</a><a id="7539" href="Algebra.Bundles.html#6400" class="Function">rawMonoid</a> <a id="7549" class="Symbol">to</a> <a id="7552" class="Function">Vcm-mon</a><a id="7559" class="Symbol">)</a>
    <a id="7565" class="Keyword">open</a> <a id="7570" href="Algebra.Bundles.html#6578" class="Module">CommutativeMonoid</a> <a id="7588" href="Data.Nat.Properties.html#16466" class="Function">+-0-commutativeMonoid</a>  <a id="7611" class="Keyword">using</a> <a id="7617" class="Symbol">()</a> <a id="7620" class="Keyword">renaming</a> <a id="7629" class="Symbol">(</a><a id="7630" href="Algebra.Bundles.html#6400" class="Function">rawMonoid</a> <a id="7640" class="Symbol">to</a> <a id="7643" class="Function">ℕ-mon</a><a id="7648" class="Symbol">)</a>
    <a id="7654" class="Keyword">open</a> <a id="7659" href="Algebra.Morphism.Structures.html#2756" class="Module">IsMonoidHomomorphism</a>                     <a id="7700" class="Keyword">using</a> <a id="7706" class="Symbol">(</a><a id="7707" href="Algebra.Morphism.Structures.html#2833" class="Field">isMagmaHomomorphism</a> <a id="7727" class="Symbol">;</a> <a id="7729" href="Algebra.Morphism.Structures.html#2885" class="Field">ε-homo</a><a id="7735" class="Symbol">)</a>
    <a id="7741" class="Keyword">open</a> <a id="7746" href="Algebra.Morphism.Structures.html#1103" class="Module">IsMagmaHomomorphism</a>                      <a id="7787" class="Keyword">using</a> <a id="7793" class="Symbol">(</a><a id="7794" href="Algebra.Morphism.Structures.html#1179" class="Field">isRelHomomorphism</a> <a id="7812" class="Symbol">;</a> <a id="7814" href="Algebra.Morphism.Structures.html#1237" class="Field">homo</a><a id="7818" class="Symbol">)</a>
    <a id="7824" class="Keyword">open</a> <a id="7829" href="Relation.Binary.Morphism.Structures.html#706" class="Module">IsRelHomomorphism</a>                        <a id="7870" class="Keyword">using</a> <a id="7876" class="Symbol">()</a> <a id="7879" class="Keyword">renaming</a> <a id="7888" class="Symbol">(</a><a id="7889" href="Relation.Binary.Morphism.Structures.html#837" class="Field">cong</a> <a id="7894" class="Symbol">to</a> <a id="7897" class="Field">⟦⟧-cong</a><a id="7904" class="Symbol">)</a>

    <a id="7911" href="Ledger.TokenAlgebra.ValueSet.html#7911" class="Function">CoinMonHom</a> <a id="7922" class="Symbol">:</a> <a id="7924" href="Algebra.Morphism.Structures.html#2756" class="Record">IsMonoidHomomorphism</a> <a id="7945" href="Ledger.TokenAlgebra.ValueSet.html#7552" class="Function">Vcm-mon</a> <a id="7953" href="Ledger.TokenAlgebra.ValueSet.html#7643" class="Function">ℕ-mon</a> <a id="7959" href="Ledger.TokenAlgebra.ValueSet.html#6931" class="Function">totalMap↠coin</a>
    <a id="7977" href="Ledger.TokenAlgebra.ValueSet.html#7911" class="Function">CoinMonHom</a> <a id="7988" class="Symbol">.</a><a id="7989" href="Algebra.Morphism.Structures.html#2833" class="Field">isMagmaHomomorphism</a> <a id="8009" class="Symbol">.</a><a id="8010" href="Algebra.Morphism.Structures.html#1179" class="Field">isRelHomomorphism</a> <a id="8028" class="Symbol">.</a><a id="8029" href="Ledger.TokenAlgebra.ValueSet.html#7897" class="Field">⟦⟧-cong</a>  <a id="8038" class="Symbol">=</a> <a id="8040" class="Symbol">λ</a> <a id="8042" href="Ledger.TokenAlgebra.ValueSet.html#8042" class="Bound">x</a> <a id="8044" class="Symbol">→</a> <a id="8046" href="Ledger.TokenAlgebra.ValueSet.html#8042" class="Bound">x</a>
    <a id="8052" href="Ledger.TokenAlgebra.ValueSet.html#7911" class="Function">CoinMonHom</a> <a id="8063" class="Symbol">.</a><a id="8064" href="Algebra.Morphism.Structures.html#2833" class="Field">isMagmaHomomorphism</a> <a id="8084" class="Symbol">.</a><a id="8085" href="Algebra.Morphism.Structures.html#1237" class="Field">homo</a>                        <a id="8113" class="Symbol">=</a> <a id="8115" class="Symbol">λ</a> <a id="8117" href="Ledger.TokenAlgebra.ValueSet.html#8117" class="Bound">x</a> <a id="8119" href="Ledger.TokenAlgebra.ValueSet.html#8119" class="Bound">y</a> <a id="8121" class="Symbol">→</a> <a id="8123" href="Ledger.TokenAlgebra.ValueSet.html#2975" class="Function">⊕-lemma</a> <a id="8131" href="Ledger.TokenAlgebra.ValueSet.html#8117" class="Bound">x</a> <a id="8133" href="Ledger.TokenAlgebra.ValueSet.html#8119" class="Bound">y</a>
    <a id="8139" href="Ledger.TokenAlgebra.ValueSet.html#7911" class="Function">CoinMonHom</a> <a id="8150" class="Symbol">.</a><a id="8151" href="Algebra.Morphism.Structures.html#2885" class="Field">ε-homo</a>                                           <a id="8200" class="Symbol">=</a> <a id="8202" href="Ledger.TokenAlgebra.ValueSet.html#3235" class="Function">lookupι≡0</a>
<a id="8212" class="Markup">\end{code}</a><a id="8222" class="Background">
</a></pre></body></html>