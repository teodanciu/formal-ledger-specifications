<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Tactic.ByEq</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>
<a id="36" class="Keyword">module</a> <a id="43" href="Tactic.ByEq.html" class="Module">Tactic.ByEq</a> <a id="55" class="Keyword">where</a>

<a id="62" class="Keyword">open</a> <a id="67" class="Keyword">import</a> <a id="74" href="Prelude.html" class="Module">Prelude</a>
<a id="82" class="Keyword">open</a> <a id="87" class="Keyword">import</a> <a id="94" href="Interface.Functor.html" class="Module">Interface.Functor</a> <a id="112" class="Keyword">using</a> <a id="118" class="Symbol">(</a><a id="119" href="Interface.Functor.html#448" class="Function">map</a><a id="122" class="Symbol">;</a> <a id="124" href="Interface.Functor.html#512" class="Function Operator">_&lt;&amp;&gt;_</a><a id="129" class="Symbol">)</a>

<a id="132" class="Keyword">open</a> <a id="137" class="Keyword">import</a> <a id="144" href="Agda.Builtin.Reflection.html" class="Module">Agda.Builtin.Reflection</a> <a id="168" class="Keyword">using</a> <a id="174" class="Symbol">(</a><a id="175" href="Agda.Builtin.Reflection.html#5783" class="InductiveConstructor">clause</a><a id="181" class="Symbol">;</a> <a id="183" href="Agda.Builtin.Reflection.html#5549" class="InductiveConstructor">dot</a><a id="186" class="Symbol">)</a>
<a id="188" class="Keyword">open</a> <a id="193" class="Keyword">import</a> <a id="200" href="Reflection.html" class="Module">Reflection</a>
<a id="211" class="Keyword">open</a> <a id="216" class="Keyword">import</a> <a id="223" href="Generics.html" class="Module">Generics</a>

<a id="233" class="Comment">-- Introduce as many arguments as possible and then:</a>
<a id="286" class="Comment">--   1. for those of type `_ ≡ _`, unify with  `refl`</a>
<a id="340" class="Comment">--   2. ignore the rest of the arguments (unify with `_`)</a>
<a id="398" class="Comment">--   3. unify the hole with `refl`</a>
<a id="by-eq"></a><a id="433" href="Tactic.ByEq.html#433" class="Function">by-eq</a> <a id="439" class="Symbol">:</a> <a id="441" href="Generics.Core.html#2429" class="Function">Hole</a> <a id="446" class="Symbol">→</a> <a id="448" href="Agda.Builtin.Reflection.html#8279" class="Postulate">TC</a> <a id="451" href="Agda.Builtin.Unit.html#158" class="Record">⊤</a>
<a id="453" href="Tactic.ByEq.html#433" class="Function">by-eq</a> <a id="459" href="Tactic.ByEq.html#459" class="Bound">hole</a> <a id="464" class="Symbol">=</a> <a id="466" class="Keyword">do</a>
  <a id="471" href="Tactic.ByEq.html#471" class="Bound">ty</a> <a id="474" href="Reflection.TCM.Syntax.html#614" class="Function Operator">←</a> <a id="476" href="Agda.Builtin.Reflection.html#9719" class="Postulate">withNormalisation</a> <a id="494" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="499" href="Function.Base.html#1994" class="Function Operator">$</a> <a id="501" href="Agda.Builtin.Reflection.html#8555" class="Postulate">inferType</a> <a id="511" href="Tactic.ByEq.html#459" class="Bound">hole</a>
  <a id="518" class="Keyword">let</a> <a id="522" href="Tactic.ByEq.html#522" class="Bound">ps</a> <a id="525" class="Symbol">:</a> <a id="527" href="Reflection.AST.Argument.html#1570" class="Function">Args</a> <a id="532" href="Agda.Builtin.Reflection.html#4708" class="Datatype">Pattern</a>
      <a id="546" href="Tactic.ByEq.html#522" class="Bound">ps</a> <a id="549" class="Symbol">=</a> <a id="551" href="Generics.Utils.html#3116" class="Function">argTys</a> <a id="558" href="Tactic.ByEq.html#471" class="Bound">ty</a> <a id="561" href="Interface.Functor.html#512" class="Function Operator">&lt;&amp;&gt;</a> <a id="565" href="Interface.Functor.html#448" class="Function">map</a> <a id="569" class="Symbol">λ</a> <a id="571" class="Symbol">{(</a><a id="573" href="Agda.Builtin.Reflection.html#4928" class="InductiveConstructor">def</a> <a id="577" class="Symbol">(</a><a id="578" class="Keyword">quote</a> <a id="584" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="587" class="Symbol">)</a> <a id="589" class="Symbol">_)</a> <a id="592" class="Symbol">→</a> <a id="594" class="Keyword">quote</a> <a id="600" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="605" href="Generics.Core.html#2204" class="InductiveConstructor Operator">◇</a><a id="606" class="Symbol">;</a> <a id="608" class="CatchallClause Symbol">_</a> <a id="610" class="Symbol">→</a> <a id="612" href="Agda.Builtin.Reflection.html#5549" class="InductiveConstructor">dot</a> <a id="616" href="Agda.Builtin.Reflection.html#5271" class="InductiveConstructor">unknown</a><a id="623" class="Symbol">}</a>
  <a id="627" href="Agda.Builtin.Reflection.html#8452" class="Postulate">unify</a> <a id="633" href="Tactic.ByEq.html#459" class="Bound">hole</a> <a id="638" href="Function.Base.html#1994" class="Function Operator">$</a> <a id="640" href="Agda.Builtin.Reflection.html#5038" class="InductiveConstructor">pat-lam</a> <a id="648" href="Data.List.Base.html#5219" class="Function Operator">[</a> <a id="650" href="Agda.Builtin.Reflection.html#5783" class="InductiveConstructor">clause</a> <a id="657" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="660" href="Tactic.ByEq.html#522" class="Bound">ps</a> <a id="663" class="Symbol">(</a><a id="664" class="Keyword">quote</a> <a id="670" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="675" href="Generics.Core.html#2086" class="InductiveConstructor Operator">◆</a><a id="676" class="Symbol">)</a> <a id="678" href="Data.List.Base.html#5219" class="Function Operator">]</a> <a id="680" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

<a id="684" class="Keyword">macro</a> <a id="$by-eq"></a><a id="690" href="Tactic.ByEq.html#690" class="Function">$by-eq</a> <a id="697" class="Symbol">=</a> <a id="699" href="Tactic.ByEq.html#433" class="Function">by-eq</a>

<a id="706" class="Keyword">private</a>
  <a id="716" class="Comment">-- test that macro works</a>
  <a id="743" href="Tactic.ByEq.html#743" class="Function">_</a> <a id="745" class="Symbol">:</a> <a id="747" class="Symbol">∀</a> <a id="749" class="Symbol">{</a><a id="750" href="Tactic.ByEq.html#750" class="Bound">n</a> <a id="752" href="Tactic.ByEq.html#752" class="Bound">m</a> <a id="754" href="Tactic.ByEq.html#754" class="Bound">k</a> <a id="756" class="Symbol">:</a> <a id="758" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="759" class="Symbol">}</a> <a id="761" class="Symbol">→</a> <a id="763" href="Tactic.ByEq.html#750" class="Bound">n</a> <a id="765" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="767" href="Tactic.ByEq.html#752" class="Bound">m</a> <a id="769" class="Symbol">→</a> <a id="771" href="Tactic.ByEq.html#752" class="Bound">m</a> <a id="773" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="775" href="Tactic.ByEq.html#754" class="Bound">k</a> <a id="777" class="Symbol">→</a> <a id="779" href="Tactic.ByEq.html#750" class="Bound">n</a> <a id="781" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="783" href="Tactic.ByEq.html#754" class="Bound">k</a>
  <a id="787" class="Symbol">_</a> <a id="789" class="Symbol">=</a> <a id="791" href="Tactic.ByEq.html#690" class="Macro">$by-eq</a>

  <a id="801" href="Tactic.ByEq.html#801" class="Function">_</a> <a id="803" class="Symbol">:</a> <a id="805" class="Symbol">∀</a> <a id="807" class="Symbol">{</a><a id="808" href="Tactic.ByEq.html#808" class="Bound">n</a> <a id="810" href="Tactic.ByEq.html#810" class="Bound">m</a> <a id="812" href="Tactic.ByEq.html#812" class="Bound">k</a> <a id="814" href="Tactic.ByEq.html#814" class="Bound">x</a> <a id="816" href="Tactic.ByEq.html#816" class="Bound">y</a> <a id="818" class="Symbol">:</a> <a id="820" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="821" class="Symbol">}</a> <a id="823" class="Symbol">→</a> <a id="825" href="Tactic.ByEq.html#808" class="Bound">n</a> <a id="827" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="829" href="Tactic.ByEq.html#810" class="Bound">m</a> <a id="831" class="Symbol">→</a> <a id="833" href="Tactic.ByEq.html#814" class="Bound">x</a> <a id="835" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="837" href="Tactic.ByEq.html#816" class="Bound">y</a> <a id="839" class="Symbol">→</a> <a id="841" href="Tactic.ByEq.html#810" class="Bound">m</a> <a id="843" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="845" href="Tactic.ByEq.html#808" class="Bound">n</a>
  <a id="849" class="Symbol">_</a> <a id="851" class="Symbol">=</a> <a id="853" href="Tactic.ByEq.html#690" class="Macro">$by-eq</a>

  <a id="863" class="Comment">-- test that tactic arguments work</a>
  <a id="f"></a><a id="900" href="Tactic.ByEq.html#900" class="Function">f</a> <a id="902" class="Symbol">:</a> <a id="904" class="Symbol">{@(</a><a id="907" class="Keyword">tactic</a> <a id="914" href="Tactic.ByEq.html#433" class="Function">by-eq</a><a id="919" class="Symbol">)</a> <a id="921" href="Tactic.ByEq.html#921" class="Bound">_</a> <a id="923" class="Symbol">:</a> <a id="925" class="Symbol">∀</a> <a id="927" class="Symbol">{</a><a id="928" href="Tactic.ByEq.html#928" class="Bound">n</a> <a id="930" href="Tactic.ByEq.html#930" class="Bound">m</a> <a id="932" class="Symbol">:</a> <a id="934" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="935" class="Symbol">}</a> <a id="937" class="Symbol">→</a> <a id="939" href="Tactic.ByEq.html#928" class="Bound">n</a> <a id="941" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="943" href="Tactic.ByEq.html#930" class="Bound">m</a> <a id="945" class="Symbol">→</a> <a id="947" href="Tactic.ByEq.html#930" class="Bound">m</a> <a id="949" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="951" href="Tactic.ByEq.html#928" class="Bound">n</a><a id="952" class="Symbol">}</a> <a id="954" class="Symbol">→</a> <a id="956" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a> <a id="961" class="Symbol">→</a> <a id="963" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="970" href="Tactic.ByEq.html#900" class="Function">f</a> <a id="972" class="Symbol">=</a> <a id="974" href="Function.Base.html#695" class="Function">id</a>

  <a id="980" href="Tactic.ByEq.html#980" class="Function">_</a> <a id="982" class="Symbol">:</a> <a id="984" href="Tactic.ByEq.html#900" class="Function">f</a> <a id="986" class="Symbol">{λ</a> <a id="989" class="Keyword">where</a> <a id="995" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="1000" class="Symbol">→</a> <a id="1002" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="1006" class="Symbol">}</a> <a id="1008" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="1013" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1015" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
  <a id="1022" class="Symbol">_</a> <a id="1024" class="Symbol">=</a> <a id="1026" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

  <a id="1034" href="Tactic.ByEq.html#1034" class="Function">_</a> <a id="1036" class="Symbol">:</a> <a id="1038" href="Tactic.ByEq.html#900" class="Function">f</a> <a id="1040" class="Symbol">{</a><a id="1041" href="Tactic.ByEq.html#690" class="Macro">$by-eq</a><a id="1047" class="Symbol">}</a> <a id="1049" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="1054" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1056" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
  <a id="1063" class="Symbol">_</a> <a id="1065" class="Symbol">=</a> <a id="1067" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

  <a id="1075" href="Tactic.ByEq.html#1075" class="Function">_</a> <a id="1077" class="Symbol">:</a> <a id="1079" href="Tactic.ByEq.html#900" class="Function">f</a> <a id="1081" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="1086" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1088" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
  <a id="1095" class="Symbol">_</a> <a id="1097" class="Symbol">=</a> <a id="1099" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

  <a id="1107" class="Comment">-- test that normalisation works</a>
  <a id="Sym"></a><a id="1142" href="Tactic.ByEq.html#1142" class="Function">Sym</a> <a id="1146" class="Symbol">=</a> <a id="1148" class="Symbol">∀</a> <a id="1150" class="Symbol">{</a><a id="1151" href="Tactic.ByEq.html#1151" class="Bound">n</a> <a id="1153" href="Tactic.ByEq.html#1153" class="Bound">m</a> <a id="1155" class="Symbol">:</a> <a id="1157" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="1158" class="Symbol">}</a> <a id="1160" class="Symbol">→</a> <a id="1162" href="Tactic.ByEq.html#1151" class="Bound">n</a> <a id="1164" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1166" href="Tactic.ByEq.html#1153" class="Bound">m</a> <a id="1168" class="Symbol">→</a> <a id="1170" href="Tactic.ByEq.html#1153" class="Bound">m</a> <a id="1172" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1174" href="Tactic.ByEq.html#1151" class="Bound">n</a>

  <a id="g"></a><a id="1179" href="Tactic.ByEq.html#1179" class="Function">g</a> <a id="1181" class="Symbol">:</a> <a id="1183" class="Symbol">{@(</a><a id="1186" class="Keyword">tactic</a> <a id="1193" href="Tactic.ByEq.html#433" class="Function">by-eq</a><a id="1198" class="Symbol">)</a> <a id="1200" href="Tactic.ByEq.html#1200" class="Bound">_</a> <a id="1202" class="Symbol">:</a> <a id="1204" href="Tactic.ByEq.html#1142" class="Function">Sym</a><a id="1207" class="Symbol">}</a> <a id="1209" class="Symbol">→</a> <a id="1211" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a> <a id="1216" class="Symbol">→</a> <a id="1218" href="Agda.Builtin.Bool.html#156" class="Datatype">Bool</a>
  <a id="1225" href="Tactic.ByEq.html#1179" class="Function">g</a> <a id="1227" class="Symbol">=</a> <a id="1229" href="Function.Base.html#695" class="Function">id</a>

  <a id="1235" href="Tactic.ByEq.html#1235" class="Function">_</a> <a id="1237" class="Symbol">:</a> <a id="1239" href="Tactic.ByEq.html#1179" class="Function">g</a> <a id="1241" class="Symbol">{λ</a> <a id="1244" class="Keyword">where</a> <a id="1250" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="1255" class="Symbol">→</a> <a id="1257" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="1261" class="Symbol">}</a> <a id="1263" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="1268" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1270" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
  <a id="1277" class="Symbol">_</a> <a id="1279" class="Symbol">=</a> <a id="1281" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

  <a id="1289" href="Tactic.ByEq.html#1289" class="Function">_</a> <a id="1291" class="Symbol">:</a> <a id="1293" href="Tactic.ByEq.html#1179" class="Function">g</a> <a id="1295" class="Symbol">{</a><a id="1296" href="Tactic.ByEq.html#690" class="Macro">$by-eq</a><a id="1302" class="Symbol">}</a> <a id="1304" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="1309" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1311" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
  <a id="1318" class="Symbol">_</a> <a id="1320" class="Symbol">=</a> <a id="1322" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

  <a id="1330" href="Tactic.ByEq.html#1330" class="Function">_</a> <a id="1332" class="Symbol">:</a> <a id="1334" href="Tactic.ByEq.html#1179" class="Function">g</a> <a id="1336" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a> <a id="1341" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1343" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a>
  <a id="1350" class="Symbol">_</a> <a id="1352" class="Symbol">=</a> <a id="1354" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre></body></html>