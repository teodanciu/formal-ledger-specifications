<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Utxow.Properties</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a><a id="51" class="Symbol">;</a> <a id="53" class="Keyword">open</a> <a id="58" href="Interface.ComputationalRelation.html#627" class="Module">Computational</a> <a id="72" class="Symbol">⦃...⦄</a>
<a id="78" class="Keyword">open</a> <a id="83" class="Keyword">import</a> <a id="90" href="Ledger.Crypto.html" class="Module">Ledger.Crypto</a>
<a id="104" class="Keyword">open</a> <a id="109" class="Keyword">import</a> <a id="116" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a>

<a id="136" class="Keyword">module</a> <a id="143" href="Ledger.Utxow.Properties.html" class="Module">Ledger.Utxow.Properties</a> <a id="167" class="Symbol">(</a><a id="168" href="Ledger.Utxow.Properties.html#168" class="Bound">txs</a> <a id="172" class="Symbol">:</a> <a id="174" class="Symbol">_)</a> <a id="177" class="Symbol">(</a><a id="178" class="Keyword">open</a> <a id="183" href="Ledger.Transaction.html#617" class="Module">TransactionStructure</a> <a id="204" href="Ledger.Utxow.Properties.html#168" class="Bound">txs</a><a id="207" class="Symbol">)</a> <a id="209" class="Keyword">where</a>

<a id="216" class="Keyword">open</a> <a id="221" class="Keyword">import</a> <a id="228" href="Ledger.Utxow.html" class="Module">Ledger.Utxow</a> <a id="241" href="Ledger.Utxow.Properties.html#168" class="Bound">txs</a>
<a id="245" class="Keyword">open</a> <a id="250" class="Keyword">import</a> <a id="257" href="Ledger.Utxo.html" class="Module">Ledger.Utxo</a> <a id="269" href="Ledger.Utxow.Properties.html#168" class="Bound">txs</a>

<a id="274" class="Keyword">private</a>
  <a id="UTXOW-premise"></a><a id="284" href="Ledger.Utxow.Properties.html#284" class="Function">UTXOW-premise</a> <a id="298" class="Symbol">:</a> <a id="300" class="Symbol">∀</a> <a id="302" href="Ledger.Utxow.Properties.html#302" class="Bound">Γ</a> <a id="304" href="Ledger.Utxow.Properties.html#304" class="Bound">s</a> <a id="306" href="Ledger.Utxow.Properties.html#306" class="Bound">tx</a> <a id="309" class="Symbol">→</a> <a id="311" href="Agda.Primitive.html#320" class="Primitive">Set</a>
  <a id="317" href="Ledger.Utxow.Properties.html#284" class="Function">UTXOW-premise</a> <a id="331" href="Ledger.Utxow.Properties.html#331" class="Bound">Γ</a> <a id="333" href="Ledger.Utxow.Properties.html#333" class="Bound">s</a> <a id="335" href="Ledger.Utxow.Properties.html#335" class="Bound">tx</a> <a id="338" class="Symbol">=</a>
    <a id="344" class="Keyword">let</a> <a id="348" class="Keyword">open</a> <a id="353" href="Ledger.Transaction.html#4052" class="Module">Tx</a> <a id="356" href="Ledger.Utxow.Properties.html#335" class="Bound">tx</a> <a id="359" class="Keyword">renaming</a> <a id="368" class="Symbol">(</a><a id="369" href="Ledger.Transaction.html#4077" class="Field">body</a> <a id="374" class="Symbol">to</a> <a id="377" class="Field">txb</a><a id="380" class="Symbol">);</a> <a id="383" class="Keyword">open</a> <a id="388" href="Ledger.Transaction.html#3346" class="Module">TxBody</a> <a id="395" href="Ledger.Utxow.Properties.html#377" class="Field">txb</a><a id="398" class="Symbol">;</a> <a id="400" class="Keyword">open</a> <a id="405" href="Ledger.Transaction.html#3886" class="Module">TxWitnesses</a> <a id="417" href="Ledger.Transaction.html#4102" class="Field">wits</a>
        <a id="430" class="Keyword">open</a> <a id="435" href="Ledger.Utxo.html#4386" class="Module">UTxOState</a> <a id="445" href="Ledger.Utxow.Properties.html#333" class="Bound">s</a><a id="446" class="Symbol">;</a> <a id="448" class="Keyword">open</a> <a id="453" href="Ledger.Utxo.html#4229" class="Module">UTxOEnv</a> <a id="461" href="Ledger.Utxow.Properties.html#331" class="Bound">Γ</a>
        <a id="471" href="Ledger.Utxow.Properties.html#471" class="Bound">witsKeyHashes</a>     <a id="489" class="Symbol">=</a> <a id="491" href="Ledger.Prelude.html#1544" class="Function">mapˢ</a> <a id="496" href="Interface.Hashable.html#109" class="Field">hash</a> <a id="501" class="Symbol">(</a><a id="502" href="Interface.IsSet.html#794" class="Function">dom</a> <a id="506" href="Ledger.Transaction.html#3920" class="Function">vkSigs</a><a id="512" class="Symbol">)</a>
        <a id="522" href="Ledger.Utxow.Properties.html#522" class="Bound">witsScriptHashes</a>  <a id="540" class="Symbol">=</a> <a id="542" href="Ledger.Prelude.html#1544" class="Function">mapˢ</a> <a id="547" href="Interface.Hashable.html#109" class="Field">hash</a> <a id="552" href="Ledger.Transaction.html#3952" class="Function">scripts</a>
    <a id="564" class="Keyword">in</a>
      <a id="573" class="Symbol">(</a><a id="574" href="Interface.IsSet.html#611" class="Function">∀[</a> <a id="577" href="Ledger.Utxow.Properties.html#577" class="Bound">(</a><a id="578" href="Ledger.Utxow.Properties.html#578" class="Bound">vk</a> <a id="581" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="583" href="Ledger.Utxow.Properties.html#583" class="Bound">σ</a><a id="584" href="Ledger.Utxow.Properties.html#577" class="Bound">)</a> <a id="586" href="Interface.IsSet.html#611" class="Function">∈</a> <a id="588" href="Ledger.Transaction.html#3920" class="Function">vkSigs</a> <a id="595" href="Interface.IsSet.html#611" class="Function">]</a> <a id="597" href="Ledger.Crypto.html#791" class="Function">isSigned</a> <a id="606" href="Ledger.Utxow.Properties.html#578" class="Bound">vk</a> <a id="609" class="Symbol">(</a><a id="610" href="Ledger.Transaction.html#2121" class="Field">txidBytes</a> <a id="620" href="Ledger.Transaction.html#3857" class="Function">txid</a><a id="624" class="Symbol">)</a> <a id="626" href="Ledger.Utxow.Properties.html#583" class="Bound">σ</a><a id="627" class="Symbol">)</a>
    <a id="633" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="635" class="Symbol">(</a><a id="636" href="Interface.IsSet.html#611" class="Function">∀[</a> <a id="639" href="Ledger.Utxow.Properties.html#639" class="Bound">s</a> <a id="641" href="Interface.IsSet.html#611" class="Function">∈</a> <a id="643" href="Ledger.Transaction.html#3977" class="Function">scriptsP1</a> <a id="653" href="Interface.IsSet.html#611" class="Function">]</a> <a id="655" href="Ledger.Script.html#467" class="Function">validP1Script</a> <a id="669" href="Ledger.Utxow.Properties.html#471" class="Bound">witsKeyHashes</a> <a id="683" href="Ledger.Transaction.html#3500" class="Function">txvldt</a> <a id="690" href="Ledger.Utxow.Properties.html#639" class="Bound">s</a><a id="691" class="Symbol">)</a>
    <a id="697" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="699" href="Ledger.Utxow.html#750" class="Function">witsVKeyNeeded</a> <a id="714" href="Ledger.Utxo.html#4281" class="Function">ppolicy</a> <a id="722" href="Ledger.Utxo.html#4441" class="Function">utxo</a> <a id="727" href="Ledger.Utxow.Properties.html#377" class="Field">txb</a> <a id="731" href="Axiom.Set.html#1697" class="Function Operator">⊆</a> <a id="733" href="Ledger.Utxow.Properties.html#471" class="Bound">witsKeyHashes</a>
    <a id="751" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="753" href="Ledger.Utxow.html#860" class="Function">scriptsNeeded</a> <a id="767" href="Ledger.Utxo.html#4281" class="Function">ppolicy</a> <a id="775" href="Ledger.Utxo.html#4441" class="Function">utxo</a> <a id="780" href="Ledger.Utxow.Properties.html#377" class="Field">txb</a> <a id="784" href="Axiom.Set.html#2471" class="Function Operator">≡ᵉ</a> <a id="787" href="Ledger.Utxow.Properties.html#522" class="Bound">witsScriptHashes</a>
    <a id="808" href="Data.Product.Base.html#1109" class="Function Operator">×</a> <a id="810" href="Ledger.Transaction.html#3756" class="Function">txADhash</a> <a id="819" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="821" href="Interface.Functor.html#448" class="Function">map</a> <a id="825" href="Interface.Hashable.html#109" class="Field">hash</a> <a id="830" href="Ledger.Transaction.html#4132" class="Field">txAD</a>

<a id="836" class="Keyword">open</a> <a id="841" href="Ledger.Transaction.html#4052" class="Module">Tx</a>
<a id="844" class="Keyword">instance</a>
  <a id="Computational-UTXOW"></a><a id="855" href="Ledger.Utxow.Properties.html#855" class="Function">Computational-UTXOW</a> <a id="875" class="Symbol">:</a> <a id="877" href="Interface.ComputationalRelation.html#627" class="Record">Computational</a> <a id="891" href="Ledger.Utxow.html#1136" class="Datatype Operator">_⊢_⇀⦇_,UTXOW⦈_</a>
  <a id="908" href="Ledger.Utxow.Properties.html#855" class="Function">Computational-UTXOW</a> <a id="928" class="Symbol">.</a><a id="929" href="Interface.ComputationalRelation.html#701" class="Field">computeProof</a> <a id="942" href="Ledger.Utxow.Properties.html#942" class="Bound">Γ</a> <a id="944" href="Ledger.Utxow.Properties.html#944" class="Bound">s</a> <a id="946" href="Ledger.Utxow.Properties.html#946" class="Bound">tx</a><a id="948" class="Symbol">@(</a><a id="950" class="Keyword">record</a> <a id="957" class="Symbol">{</a><a id="958" href="Ledger.Transaction.html#4077" class="Field">body</a> <a id="963" class="Symbol">=</a> <a id="965" href="Ledger.Utxow.Properties.html#965" class="Bound">txb</a><a id="968" class="Symbol">})</a> <a id="971" class="Symbol">=</a>
    <a id="977" href="Function.Base.html#4053" class="Function Operator">case</a> <a id="982" href="Interface.Decidable.Instance.html#739" class="Function Operator">¿</a> <a id="984" href="Ledger.Utxow.Properties.html#284" class="Function">UTXOW-premise</a> <a id="998" href="Ledger.Utxow.Properties.html#942" class="Bound">Γ</a> <a id="1000" href="Ledger.Utxow.Properties.html#944" class="Bound">s</a> <a id="1002" href="Ledger.Utxow.Properties.html#946" class="Bound">tx</a> <a id="1005" href="Interface.Decidable.Instance.html#739" class="Function Operator">¿</a> <a id="1007" href="Function.Base.html#4053" class="Function Operator">of</a> <a id="1010" class="Symbol">λ</a> <a id="1012" class="Keyword">where</a>
      <a id="1024" class="Symbol">(</a><a id="1025" href="Relation.Nullary.Decidable.Core.html#1613" class="InductiveConstructor">yes</a> <a id="1029" class="Symbol">(</a><a id="1030" href="Ledger.Utxow.Properties.html#1030" class="Bound">p₁</a> <a id="1033" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1035" href="Ledger.Utxow.Properties.html#1035" class="Bound">p₂</a> <a id="1038" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1040" href="Ledger.Utxow.Properties.html#1040" class="Bound">p₃</a> <a id="1043" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1045" href="Ledger.Utxow.Properties.html#1045" class="Bound">p₄</a> <a id="1048" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1050" href="Ledger.Utxow.Properties.html#1050" class="Bound">p₅</a><a id="1052" class="Symbol">))</a> <a id="1055" class="Symbol">→</a>
        <a id="1065" href="Interface.Bifunctor.html#813" class="Function">map₂′</a> <a id="1071" class="Symbol">(</a><a id="1072" href="Ledger.Utxow.html#1440" class="InductiveConstructor">UTXOW-inductive</a> <a id="1088" href="Ledger.Utxow.Properties.html#1030" class="Bound">p₁</a> <a id="1091" href="Ledger.Utxow.Properties.html#1035" class="Bound">p₂</a> <a id="1094" href="Ledger.Utxow.Properties.html#1040" class="Bound">p₃</a> <a id="1097" href="Ledger.Utxow.Properties.html#1045" class="Bound">p₄</a> <a id="1100" href="Ledger.Utxow.Properties.html#1050" class="Bound">p₅</a><a id="1102" class="Symbol">)</a> <a id="1104" href="Interface.Functor.html#418" class="Field Operator">&lt;$&gt;</a> <a id="1108" href="Interface.ComputationalRelation.html#701" class="Field">computeProof</a> <a id="1121" href="Ledger.Utxow.Properties.html#942" class="Bound">Γ</a> <a id="1123" href="Ledger.Utxow.Properties.html#944" class="Bound">s</a> <a id="1125" class="Symbol">(</a><a id="1126" href="Ledger.Utxow.Properties.html#946" class="Bound">tx</a> <a id="1129" class="Symbol">.</a><a id="1130" href="Ledger.Transaction.html#4077" class="Field">body</a><a id="1134" class="Symbol">)</a>
      <a id="1142" class="Symbol">(</a><a id="1143" href="Relation.Nullary.Decidable.Core.html#1650" class="InductiveConstructor">no</a> <a id="1146" class="Symbol">_)</a> <a id="1149" class="Symbol">→</a> <a id="1151" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>
  <a id="1161" href="Ledger.Utxow.Properties.html#855" class="Function">Computational-UTXOW</a> <a id="1181" class="Symbol">.</a><a id="1182" href="Interface.ComputationalRelation.html#884" class="Field">completeness</a> <a id="1195" href="Ledger.Utxow.Properties.html#1195" class="Bound">Γ</a> <a id="1197" href="Ledger.Utxow.Properties.html#1197" class="Bound">s</a> <a id="1199" href="Ledger.Utxow.Properties.html#1199" class="Bound">tx</a> <a id="1202" href="Ledger.Utxow.Properties.html#1202" class="Bound">s&#39;</a> <a id="1205" class="Symbol">(</a><a id="1206" href="Ledger.Utxow.html#1440" class="InductiveConstructor">UTXOW-inductive</a> <a id="1222" href="Ledger.Utxow.Properties.html#1222" class="Bound">p₁</a> <a id="1225" href="Ledger.Utxow.Properties.html#1225" class="Bound">p₂</a> <a id="1228" href="Ledger.Utxow.Properties.html#1228" class="Bound">p₃</a> <a id="1231" href="Ledger.Utxow.Properties.html#1231" class="Bound">p₄</a> <a id="1234" href="Ledger.Utxow.Properties.html#1234" class="Bound">p₅</a> <a id="1237" href="Ledger.Utxow.Properties.html#1237" class="Bound">h</a><a id="1238" class="Symbol">)</a>
    <a id="1244" class="Keyword">rewrite</a> <a id="1252" href="Relation.Nullary.Decidable.html#2677" class="Function">dec-yes</a> <a id="1260" href="Interface.Decidable.Instance.html#739" class="Function Operator">¿</a> <a id="1262" href="Ledger.Utxow.Properties.html#284" class="Function">UTXOW-premise</a> <a id="1276" href="Ledger.Utxow.Properties.html#1195" class="Bound">Γ</a> <a id="1278" href="Ledger.Utxow.Properties.html#1197" class="Bound">s</a> <a id="1280" href="Ledger.Utxow.Properties.html#1199" class="Bound">tx</a> <a id="1283" href="Interface.Decidable.Instance.html#739" class="Function Operator">¿</a> <a id="1285" class="Symbol">(</a><a id="1286" href="Ledger.Utxow.Properties.html#1222" class="Bound">p₁</a> <a id="1289" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1291" href="Ledger.Utxow.Properties.html#1225" class="Bound">p₂</a> <a id="1294" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1296" href="Ledger.Utxow.Properties.html#1228" class="Bound">p₃</a> <a id="1299" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1301" href="Ledger.Utxow.Properties.html#1231" class="Bound">p₄</a> <a id="1304" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1306" href="Ledger.Utxow.Properties.html#1234" class="Bound">p₅</a><a id="1308" class="Symbol">)</a> <a id="1310" class="Symbol">.</a><a id="1311" href="Data.Product.Base.html#622" class="Field">proj₂</a>
    <a id="1321" class="Keyword">with</a> <a id="1326" href="Interface.ComputationalRelation.html#701" class="Field">computeProof</a> <a id="1339" href="Ledger.Utxow.Properties.html#1195" class="Bound">Γ</a> <a id="1341" href="Ledger.Utxow.Properties.html#1197" class="Bound">s</a> <a id="1343" class="Symbol">(</a><a id="1344" href="Ledger.Utxow.Properties.html#1199" class="Bound">tx</a> <a id="1347" class="Symbol">.</a><a id="1348" href="Ledger.Transaction.html#4077" class="Field">body</a><a id="1352" class="Symbol">)</a> <a id="1354" class="Symbol">|</a> <a id="1356" href="Interface.ComputationalRelation.html#884" class="Field">completeness</a> <a id="1369" class="Symbol">_</a> <a id="1371" class="Symbol">_</a> <a id="1373" class="Symbol">_</a> <a id="1375" class="Symbol">_</a> <a id="1377" href="Ledger.Utxow.Properties.html#1237" class="Bound">h</a>
  <a id="1381" class="Symbol">...</a>   <a id="1387" class="Symbol">|</a> <a id="1389" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="1394" href="Ledger.Utxow.Properties.html#1394" class="Bound">h</a> <a id="1396" class="Symbol">|</a> <a id="1398" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="1403" class="Symbol">=</a> <a id="1405" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre></body></html>